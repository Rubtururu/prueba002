var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(b){return b.raw=b};$jscomp.createTemplateTagFirstArgWithRaw=function(b,a){b.raw=a;return b};$jscomp.arrayIteratorImpl=function(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var a="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return a?a.call(b):$jscomp.arrayIterator(b)};
$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){if(b==Array.prototype||b==Object.prototype)return b;b[a]=c.value;return b};
$jscomp.getGlobal=function(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var a=0;a<b.length;++a){var c=b[a];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(b,a){var c=$jscomp.propertyToPolyfillSymbol[a];if(null==c)return b[a];c=b[c];return void 0!==c?c:b[a]};$jscomp.polyfill=function(b,a,c,d){a&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(b,a,c,d):$jscomp.polyfillUnisolated(b,a,c,d))};
$jscomp.polyfillUnisolated=function(b,a,c,d){c=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var f=b[d];if(!(f in c))return;c=c[f]}b=b[b.length-1];d=c[b];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:a})};
$jscomp.polyfillIsolated=function(b,a,c,d){var f=b.split(".");b=1===f.length;d=f[0];d=!b&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var e=0;e<f.length-1;e++){var g=f[e];if(!(g in d))return;d=d[g]}f=f[f.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[f]:null;a=a(c);null!=a&&(b?$jscomp.defineProperty($jscomp.polyfills,f,{configurable:!0,writable:!0,value:a}):a!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[f]&&(c=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[f]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(f):$jscomp.POLYFILL_PREFIX+c+"$"+f),$jscomp.defineProperty(d,$jscomp.propertyToPolyfillSymbol[f],{configurable:!0,writable:!0,value:a})))};$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0},a={};try{return a.__proto__=b,a.a}catch(c){}return!1};
$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(b,a){b.__proto__=a;if(b.__proto__!==a)throw new TypeError(b+" is not extensible");return b}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(b){if(!(b instanceof Object))throw new TypeError("Iterator result "+b+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(b){this.yieldResult=b};$jscomp.generator.Context.prototype.throw_=function(b){this.abruptCompletion_={exception:b,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype["return"]=function(b){this.abruptCompletion_={"return":b};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(b){this.abruptCompletion_={jumpTo:b};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(b,a){this.nextAddress=a;return{value:b}};$jscomp.generator.Context.prototype.yieldAll=function(b,a){var c=$jscomp.makeIterator(b),d=c.next();$jscomp.generator.ensureIteratorResultIsObject_(d);if(d.done)this.yieldResult=d.value,this.nextAddress=a;else return this.yieldAllIterator_=c,this.yield(d.value,a)};
$jscomp.generator.Context.prototype.jumpTo=function(b){this.nextAddress=b};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(b,a){this.catchAddress_=b;void 0!=a&&(this.finallyAddress_=a)};$jscomp.generator.Context.prototype.setFinallyBlock=function(b){this.catchAddress_=0;this.finallyAddress_=b||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(b,a){this.nextAddress=b;this.catchAddress_=a||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(b){this.catchAddress_=b||0;b=this.abruptCompletion_.exception;this.abruptCompletion_=null;return b};$jscomp.generator.Context.prototype.enterFinallyBlock=function(b,a,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=b||0;this.finallyAddress_=a||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(b,a){var c=this.finallyContexts_.splice(a||0)[0];if(c=this.abruptCompletion_=this.abruptCompletion_||c){if(c.isException)return this.jumpToErrorHandler_();void 0!=c.jumpTo&&this.finallyAddress_<c.jumpTo?(this.nextAddress=c.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=b};$jscomp.generator.Context.prototype.forIn=function(b){return new $jscomp.generator.Context.PropertyIterator(b)};
$jscomp.generator.Context.PropertyIterator=function(b){this.object_=b;this.properties_=[];for(var a in b)this.properties_.push(a);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var b=this.properties_.pop();if(b in this.object_)return b}return null};$jscomp.generator.Engine_=function(b){this.context_=new $jscomp.generator.Context;this.program_=b};
$jscomp.generator.Engine_.prototype.next_=function(b){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,b,this.context_.next_);this.context_.next_(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(b){this.context_.start_();var a=this.context_.yieldAllIterator_;if(a)return this.yieldAllStep_("return"in a?a["return"]:function(c){return{value:c,done:!0}},b,this.context_["return"]);this.context_["return"](b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(b){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],b,this.context_.next_);this.context_.throw_(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(b,a,c){try{var d=b.call(this.context_.yieldAllIterator_,a);$jscomp.generator.ensureIteratorResultIsObject_(d);if(!d.done)return this.context_.stop_(),d;var f=d.value}catch(e){return this.context_.yieldAllIterator_=null,this.context_.throw_(e),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,f);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var b=this.program_(this.context_);if(b)return this.context_.stop_(),{value:b.value,done:!1}}catch(a){this.context_.yieldResult=void 0,this.context_.throw_(a)}this.context_.stop_();if(this.context_.abruptCompletion_){b=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(b.isException)throw b.exception;return{value:b["return"],done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(b){this.next=function(a){return b.next_(a)};this["throw"]=function(a){return b.throw_(a)};this["return"]=function(a){return b.return_(a)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(b,a){var c=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a));$jscomp.setPrototypeOf&&b.prototype&&$jscomp.setPrototypeOf(c,b.prototype);return c};
$jscomp.asyncExecutePromiseGenerator=function(b){function a(d){return b.next(d)}function c(d){return b["throw"](d)}return new Promise(function(d,f){function e(g){g.done?d(g.value):Promise.resolve(g.value).then(a,c).then(e,f)}e(b.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(b){return $jscomp.asyncExecutePromiseGenerator(b())};$jscomp.asyncExecutePromiseGeneratorProgram=function(b){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b)))};
var blockeExplorerUrl="https://bscscan.com",rpcURLW="",web3Server,officialNetwork="0x38",redChainID=56,testNet=!1,referredP={},exchTrans={},quests={};"127.0.0.1"==window.location.host&&(testNet=!0);
var ratiochest=.0022,userInfo={account:"",secretkey:"",mobilecode:"",gamekey:"",food:0,coal:0,wood:0,gold:0,timeforcut:0,coinsClaim:0,resClaim:0,maxroads:0,reflink:"",withdrawTime:0,quests:{}},depositCoord={posx:0,posy:0,updated:!1,ident:""},verscache=1,performanceMode=2,houses={},housesStaticOnMap={},tileNames={},tempImages={},mapobjects={},noBuildTiles=[],foodfurnace=90,buildings={},draggingObject=!1,draggingMap=!1,houseintervalcheck,apiLink="http://127.0.0.1:3000/api",apichat="",minhouseclaim=
40,dragDivsWindow=[],roadBuilder=!1,editorisopen=!1,bonusPerLevel=2,canvas=document.getElementById("canvasmap"),ctx=canvas.getContext("2d"),canvasbtns=document.getElementById("canvasbuttons"),contextbtns=canvasbtns.getContext("2d"),canvaslight=document.getElementById("lightcanvas"),contextlights=canvaslight.getContext("2d"),canvashouses=document.getElementById("canvashouses"),contexthouses=canvashouses.getContext("2d"),canvasmapedi=document.getElementById("gridCanvas"),context=canvasmapedi.getContext("2d"),
canvasmapedi2=document.getElementById("streetTiles"),context2=canvasmapedi2.getContext("2d"),backdecor=document.getElementById("backdecor"),ctxbackdecor=backdecor.getContext("2d"),tilePreloadMap={},convertedNight=!1,hoursopacity=[.15,.2,.22,.24,.26,.28,.3,.34,.35,.33,.29,.27,.21,.18,.12,0],nighthours=[18,19,20,21,22,23,0,1,2,3,4,5,6],lastopacity=0,timeWaitChat=20,buttonsArray=[],allMyNFTS=[],selectedNFT=-1,has_focus=!0,objectsArray=[],gsapfood=null,gsapwood=null,gsapgold=null,gsapcoal=null,checkNftsTimer,
pendindNowCheck=!1,antibugchecking,checkTransInt,zindexWindow=20,SX,SY,realSX,realSY,ratio=.6,tempHouses={},housesOnMap=[],timeranimate,enableChat=!1,screenwidth=document.body.offsetWidth,lastimgvaluetype="",lasttoppost="",arraytimers=[],lightImage={light:{img:null,width:0,height:0,link:"/styles/img/light.png"}},feeRef=0,NFTContract="0xC0919DEcEC75aDfaC55A6FC7c55939fE313817f9",VAULTContract="0xd31A089a557462dE5644C0CFa44cFfF7Fc04E2F0",BUSDContract="0xeD24FC36d5Ee211Ea25A80239Fb8C4Cfd80f12Ee",USDTContract=
"0x337610d27c682E347C9cD60BD4b3b107C9d34dDd",walletAdmin="0xC7944E9aB38227C3D6821F8E5b30Fb448A7798e6",gameVersion=1.22;
if(testNet){var testNets=["https://data-seed-prebsc-2-s3.binance.org:8545/","https://data-seed-prebsc-1-s3.binance.org:8545/"];blockeExplorerUrl="https://testnet.bscscan.com";rpcURLW=randomArray(testNets);web3Server=new Web3(rpcURLW);redChainID=97;officialNetwork="0x61"}else{USDTContract="0x55d398326f99059ff775485246999027b3197955";BUSDContract="0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56";NFTContract="0xa954BAc5CC1f9d4b87F8Ba3d8D7dBb1254182270";VAULTContract="0x096A94ccae62caC5F1e9005129f45598171489D9";
walletAdmin="0x9FB2C3CaCaFd6781Ef08A7C37fe6816411Ee491D";var realNets="https://bsc-dataseed1.binance.org/ https://bsc-dataseed2.binance.org/ https://bsc-dataseed3.binance.org/ https://bsc-dataseed4.binance.org/ https://bsc-dataseed1.defibit.io/ https://bsc-dataseed2.defibit.io/ https://bsc-dataseed3.defibit.io/ https://bsc-dataseed4.defibit.io/ https://bsc-dataseed1.ninicoin.io/ https://bsc-dataseed2.ninicoin.io/ https://bsc-dataseed3.ninicoin.io/ https://bsc-dataseed4.ninicoin.io/".split(" ");rpcURLW=
randomArray(realNets);web3Server=new Web3(rpcURLW);apiLink="https://api.meditown.io/api";setInterval(function(){userInfo.account.toLowerCase()!=walletAdmin.toLowerCase()&&isConsoleOpen()&&(alert("DevTools are not allowed"),window.location.href="/")},1E3)}Object.freeze(apiLink);Object.freeze(web3Server);Object.freeze(rpcURLW);loadingScreen(!0);register_tab_GUID();function isConsoleOpen(){var b=performance.now();console.timeStamp();debugger;return 100<performance.now()-b?!0:!1}
function checkUnlocked(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.yield(ethereum._metamask.isUnlocked().then(function(a){if(!a)return document.getElementsByClassName("alertmsgmid")[0].innerHTML='MetaMask is locked, please unlock it first and reload website</br><div class="buttonlists"><div class="smallbtn reloadbtn"><div class="innersmall">Reload</div></div>',show(document.getElementsByClassName("draghead4")[0]),loadingScreen(!1),document.getElementsByClassName("reloadbtn")[0].addEventListener("click",
function(){window.location.reload()}),!1;ethereum.request({method:"eth_accounts"}).then(function(){handleAccountsChanged(!1);return!1})["catch"](function(c){console.log(c)});ethereum.on("accountsChanged",function(){handleAccountsChanged(!0);return!1});ethereum.on("chainChanged",function(){window.location.reload();return!1})})["catch"](function(a){noMetaMask()}),0)})}
function handleAccountsChanged(b){var a,c,d,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(ethereum.request({method:"eth_chainId"}),2);if(4!=e.nextAddress)return a=e.yieldResult,a!=officialNetwork?(reloadNetwork(),e.jumpTo(0)):e.yield(ethereum.request({method:"eth_requestAccounts"}),4);c=e.yieldResult;d=c[0];if(void 0==d||42!=d.length)d="";if(""==d)return ethereum.request({method:"eth_requestAccounts"}).then(function(g){handleAccountsChanged(!1)})["catch"](function(g){console.log(g)}),
e.jumpTo(0);userInfo.account=d.toLowerCase();if(b)return localStorage.setItem("nftselected",-1),window.location.reload(),e["return"](!1);if(void 0==localStorage.getItem(verscache+"firm"+userInfo.account))return document.getElementsByClassName("screen-lock-text")[0].innerText="Please check your MetaMask",e.yield(ethereum.request({method:"personal_sign",params:[userInfo.account,"Login with MetaMask on MediTown"]}).then(function(g){userInfo.secretkey=g.toLowerCase();localStorage.setItem(verscache+"firm"+
userInfo.account,g.toLowerCase());checkAccountNFTS()})["catch"](function(g){makeNotif(1,"Login cancelled");document.getElementsByClassName("alertmsgmid")[0].innerHTML="There is no account connected, please connect an account through MetaMask";show(document.getElementsByClassName("draghead4")[0]);loadingScreen(!1);localStorage.removeItem(verscache+"firm"+userInfo.account)}),0);f=localStorage.getItem(verscache+"firm"+userInfo.account);return e.yield(ethereum.request({method:"personal_ecRecover",params:["Login with MetaMask on MediTown",
f]}).then(function(){userInfo.secretkey=f.toLowerCase();checkAccountNFTS()})["catch"](function(){localStorage.removeItem(verscache+"firm"+userInfo.account);localStorage.setItem("nftselected",-1);window.location.reload()}),0)})}
document.addEventListener("DOMContentLoaded",function(){void 0!=localStorage.getItem("performance")&&(performanceMode=localStorage.getItem("performance"));if(void 0!=localStorage.getItem("mobilevers")){userInfo.account=localStorage.getItem("useraccount").toLowerCase();userInfo.secretkey=localStorage.getItem("userkey").toLowerCase();userInfo.mobilecode=localStorage.getItem("mobilecode");var b=localStorage.getItem("nftselected");localStorage.setItem(verscache+"firm"+userInfo.account,userInfo.secretkey);
preloadAccount(b)}else"undefined"!==typeof window.ethereum?window.ethereum?checkUnlocked():noMetaMask():noMetaMask()});var houselights=function(b,a,c,d,f){this.posx=b;this.posy=a;this.width=d;this.height=f;this.image=c};houselights.prototype.draw=function(){null!=this.image&&contextlights.drawImage(this.image,this.posx,this.posy,this.width,this.height)};var housesoncanvas=function(b,a,c,d,f){this.posx=b;this.posy=a;this.width=d;this.height=f;this.image=c};
housesoncanvas.prototype.draw=function(){null!=this.image&&contexthouses.drawImage(this.image,this.posx,this.posy,this.width,this.height)};var allmapObjects=function(b,a,c,d,f,e,g,h){this.posx=b;this.posy=a;this.objid=c;this.width=d;this.height=f;this.image=e;this.collide=h;this.isredraw=g;this.identif=this.posx+"-"+this.posy};allmapObjects.prototype.draw=function(){null!=this.image&&ctx.drawImage(this.image,this.posx,this.posy,this.width,this.height)};
var tempRoadCells=function(b,a,c){this.posx=b;this.posy=a;this.objid=c},allmapButtons=function(b,a,c,d,f,e){this.posx=b;this.posy=a;this.width=d;this.type=c;this.height=f;this.identif=this.posx+"-"+this.posy;this.extrainfo=e;switch(this.type){case 18:this.posx+=10;this.posy-=81;break;case 16:this.posx+=11;this.posy-=65;break;case 17:this.posx+=11,this.posy-=75}};
allmapButtons.prototype.draw=function(){null!=tilePreloadMap[this.type].image&&contextbtns.drawImage(tilePreloadMap[this.type].image,this.posx,this.posy,this.width,this.height)};window.onblur=function(){has_focus=!1};window.onfocus=function(){pendindNowCheck&&(pendindNowCheck=!1,getNFTS(userInfo.account),startCheckNFTTimer());has_focus=!0};
function getNFTS(b){var a,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return a=new web3Server.eth.Contract(NFTContractABI,NFTContract),d.yield(a.methods.getOwnedNfts(b).call(),2);allMyNFTS=c=d.yieldResult;return d["return"](c)})}
function mintNFT(b){var a,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){a=(new ethers.providers.Web3Provider(window.ethereum)).getSigner();c=new ethers.Contract(NFTContract,NFTContractABI,a);loadingScreen(!0);document.getElementsByClassName("screen-lock-text")[0].innerText="Waiting for transaction confirmation";return d.yield(c.mint().then(function(f){var e=f.hash,g=new ethers.providers.Web3Provider(window.ethereum),h=0;clearInterval(checkTransInt);checkTransInt=setInterval(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){g.getTransactionReceipt(e).then(function(l){if(null==
l){document.getElementsByClassName("screen-lock-text")[0].innerText="Checking transaction...";if(5<h)return makeNotif(1,"Transaction error, please check your MetaMask"),clearInterval(checkTransInt),loadingScreen(!1),!1;h+=1}else{if(1!=l.status)return makeNotif(1,"Transaction error, please check your MetaMask"),clearInterval(checkTransInt),loadingScreen(!1),!1;if(1<=l.confirmations){clearInterval(checkTransInt);var n=1,A=setInterval(function(){function p(){var y,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==
q.nextAddress)return document.getElementsByClassName("screen-lock-text")[0].innerText="Updating NFT list...",q.yield(getNFTS(userInfo.account),2);y=q.yieldResult;w="";y.forEach(function(m){w+='<option value="'+m+'">NFT ID: #'+m+"</option>"});document.getElementsByClassName("nftslists")[0].innerHTML=w;makeNotif(0,"NFT has been successfully mined");loadingScreen(!1);q.jumpToEnd()})}if(5>n)return document.getElementsByClassName("screen-lock-text")[0].innerText="Confirmations "+n+"/4",n+=1,!1;clearInterval(A);
b?window.location.reload():p()},1E3);return!1}document.getElementsByClassName("screen-lock-text")[0].innerText="Confirmations "+l.confirmations+"/4"}});k.jumpToEnd()})},2E3)})["catch"](function(f){void 0!=f.data?void 0!=f.data.message&&makeNotif(1,f.data.message):void 0!=f.message&&makeNotif(1,f.message);clearInterval(checkTransInt);loadingScreen(!1)}),0)})}
function startCheckNFTTimer(){if(testNet)return!1;clearInterval(checkNftsTimer);checkNftsTimer=setInterval(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return pendindNowCheck?(clearInterval(checkNftsTimer),b["return"](!1)):has_focus?b.yield(getNFTS(userInfo.account),2):(pendindNowCheck=!0,b["return"](!1));if(-1!=selectedNFT&&!allMyNFTS.includes(selectedNFT))return localStorage.setItem("nftselected",-1),window.location.href="/",b["return"](!1);b.jumpToEnd()})},
15E3)}
function checkAccountNFTS(){var b,a,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return void 0==localStorage.getItem("nftselected")&&localStorage.setItem("nftselected",-1),selectedNFT=b=localStorage.getItem("nftselected"),document.getElementsByClassName("screen-lock-text")[0].innerText="Checking NFTs...",a=0,clearInterval(antibugchecking),antibugchecking=setInterval(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){7<=a&&(document.getElementsByClassName("screen-lock-text")[0].innerText="It seems to be taking too long, please refresh the page if it takes too long",
clearInterval(antibugchecking));a+=1;e.jumpToEnd()})},1E3),f.yield(getNFTS(userInfo.account),2);c=f.yieldResult;clearInterval(antibugchecking);document.getElementsByClassName("screen-lock-text")[0].innerText="NFTs loaded";startCheckNFTTimer();if(0>=c.length)document.getElementsByClassName("alertmsgmid")[0].innerHTML='It is necessary to mint an nft to start playing. Minting is totally free and you will only have to pay the fee for the transaction</br><div class="buttonlists"><div class="smallbtn mintnft satfilter1"><div class="innersmall">Mint</div></div></div>',
show(document.getElementsByClassName("draghead4")[0]),document.getElementsByClassName("mintnft")[0].addEventListener("click",function(e){mintNFT(!0)});else{if(-1!=selectedNFT)return allMyNFTS.includes(selectedNFT)?preloadAccount(selectedNFT):(localStorage.setItem("nftselected",-1),window.location.href="/"),f["return"](!1);d='<select class="form-select formnftselect nftslists" aria-label="NFT Select">';c.forEach(function(e){d+='<option value="'+e+'">NFT ID: #'+e+"</option>"});d+="</select>";document.getElementsByClassName("alertmsgmid")[0].innerHTML=
"Select the NFT you want to use</br></br>"+d+'<div class="buttonlists"><div class="smallbtn selectnft"><div class="innersmall">Select</div></div><div class="smallbtn mintnft satfilter1"><div class="innersmall">Mint</div></div></div>';document.getElementsByClassName("mintnft")[0].addEventListener("click",function(e){mintNFT(!1)});show(document.getElementsByClassName("draghead4")[0]);document.getElementsByClassName("selectnft")[0].addEventListener("click",function g(){var h=document.getElementsByClassName("formnftselect")[0].value;
0>=h?window.location.href="/":(selectedNFT=h,localStorage.setItem("nftselected",h),hide(document.getElementsByClassName("draghead4")[0]),loadingScreen(!0),this.removeEventListener("click",g),preloadAccount(selectedNFT));return!1})}loadingScreen(!1);f.jumpToEnd()})}
function preloadAccount(b){document.getElementsByClassName("screen-lock-text")[0].innerText="Loading account...";for(var a=document.cookie.split(";"),c="",d=0;d<a.length;d++){var f=a[d],e=f.indexOf("=");e=-1<e?f.substr(0,e):f;e=e.replace(/^\s+|\s+$/g,"");if("reflink"==e){c=f.split("=")[1];break}}postData(apiLink+"/wallet","POST",{wallet:userInfo.account,key:userInfo.secretkey,nftselect:b,reflink:c,mobile:userInfo.mobilecode}).then(function(g){if(1==g.result){document.getElementById("mobile-nav-toggle").classList.remove("nodisplay");
""!=userInfo.mobilecode&&(userInfo.secretkey=g.key);userInfo.gamekey=g.wristband;bonusPerLevel=g.bonusperlvl;tileNames=g.tilenames;buildings=g.buildings;housesStaticOnMap=g.housesonmap;houses=g.houses;noBuildTiles=g.nobuild;minhouseclaim=g.houseclaimmin;tilePreloadMap=g.tileroads;timeWaitChat=g.timechat;ratiochest=g.ratiochest;feeRef=g.feeref;userInfo.quests=g.accquests;foodfurnace=g.foodfurnace;mapobjects=g.map;userInfo.timeforcut=g.timecut;userInfo.coinsClaim=parseFloat(g.totalclaim).toFixed(2);
userInfo.resClaim=parseInt(g.totalres);userInfo.maxroads=parseInt(g.roadquant);userInfo.reflink=g.reflink;quests=g.quests;userInfo.withdrawTime=g.withdraw;enableChat=g.enablechat;referredP=g.listref;exchTrans=g.translist;gameVersion!=g.version&&document.body.insertAdjacentHTML("beforeend","<div class='gamevers'><span class='textvers'>New Game version available</br>Please clean cache</span></div>");var h=Object.entries(tileNames).length,k=Object.entries(tilePreloadMap).length,l=Object.entries(buildings).length,
n=0;Object.entries(lightImage).forEach(function(p){p=$jscomp.makeIterator(p);var y=p.next().value;p.next();var w=new Image;w.onload=function(q){lightImage[y].img=w;lightImage[y].width=this.width;lightImage[y].height=this.height;n+=1};w.src=lightImage[y].link});Object.entries(buildings).forEach(function(p){p=$jscomp.makeIterator(p);var y=p.next().value;p=p.next().value;var w=new Image;w.onload=function(q){buildings[y].image=w;n+=1;document.getElementsByClassName("screen-lock-text")[0].innerText="Loading... (caching image "+
n+")"};w.src="/styles/img/"+p.img});Object.entries(tileNames).forEach(function(p){p=$jscomp.makeIterator(p);p.next();var y=p.next().value,w=new Image;w.onload=function(){tempImages[y.img]=w;n+=1;document.getElementsByClassName("screen-lock-text")[0].innerText="Loading... (caching image "+n+")"};w.src="/styles/img/"+y.img});Object.entries(tilePreloadMap).forEach(function(p){p=$jscomp.makeIterator(p);var y=p.next().value;p=p.next().value;var w=new Image;w.onload=function(q){tilePreloadMap[y].image=
w;tilePreloadMap[y].w=this.width;tilePreloadMap[y].h=this.height;n+=1;document.getElementsByClassName("screen-lock-text")[0].innerText="Loading... (caching image "+n+")"};w.src="/styles/img/"+p.img});var A=setInterval(function(){n>=h+k+l+1&&(clearInterval(A),""!=g.roads&&convertRoads(g.roads),preloadAccount2(g))},10)}else if(0==g.result&&(postResultFalse(g),9998==g.code))return localStorage.removeItem(verscache+"firm"+userInfo.account),localStorage.setItem("nftselected",-1),window.location.reload(),
!1})}var pendingArrayJobs=[],firstTimeLoading=!0;
function preloadAccount2(b){document.getElementsByClassName("screen-lock-text")[0].innerText="Loading assets...";Object.entries(housesStaticOnMap).forEach(function(c){c=$jscomp.makeIterator(c);var d=c.next().value;c=c.next().value;if(void 0==c.id)return!1;document.getElementsByClassName("screen-lock-text")[0].innerText="Loading... (houseid: "+c.id+")";var f=parseInt(d.split(";")[0]);d=parseInt(d.split(";")[1]);var e=c.id+";"+f+";"+d,g=new allmapObjects(f,d,parseInt(c.id),parseInt(buildings[c.id].w),
parseInt(buildings[c.id].h),null,0,!0);objectsArray.push(g);g=changeTimezone();c.time<g.getTime()?(setBuildFunctions(e),(new housesoncanvas(f,d,buildings[c.id].image,parseInt(buildings[c.id].w),parseInt(buildings[c.id].h))).draw()):(g=document.createElement("div"),g.style.left=f+"px",g.style.top=d+"px",g.style.position="absolute",g.style.background="url(/styles/img/"+buildings[c.id].img.substr(0,buildings[c.id].img.length-5)+"b.webp)",g.style.width=buildings[c.id].w+"px",g.style.height=buildings[c.id].h+
"px",g.dataset.objid=e,g.classList="rrealign",document.getElementById("gamemap").append(g),appendProgressBar(g,e,c.time),calculateTime(c.time,"pr"+e,-1,!0))});Object.entries(mapobjects).forEach(function(c){c=$jscomp.makeIterator(c);var d=c.next().value,f=c.next().value;c=parseInt(f.id);var e=parseInt(d.split("-")[0]);d=parseInt(d.split("-")[1]);if(void 0==tileNames[c])return!1;var g=tileNames[c].img;document.getElementsByClassName("screen-lock-text")[0].innerText="Loading... (objid: "+f.id+")";if(void 0!=
tileNames[c].iscut){var h=document.createElement("div");if(void 0!=f.waittime){var k=tileNames[c].h,l=parseInt(e+tileNames[c].w/2);k=parseInt(d+k/2);l=parseInt(distance(depositCoord.posx+buildings[100].w/2,depositCoord.posy+buildings[100].h/2,l,k)/userInfo.timeforcut);0>=l&&(l=1);h.style.left=e-tileNames[c].w/2-7+"px";h.style.top=d+(tileNames[c].h-30)+"px";h.style.position="absolute";h.style.zIndex=2;document.getElementById("gamemap").append(h);appendProgressBar(h,c+";"+e+";"+d,f.waittime);calculateTime(f.waittime,
"pr"+c+";"+e+";"+d,60*l,!0)}else{f=0;if(14==c||22==c)f=18;else if(13==c||23==c)f=18;else if(9<=c&&12>=c)f=16;else if(2<=c&&3>=c||5==c)f=17;f=new allmapButtons(e,d,f,45,45,"");depositCoord.updated&&f.draw();buttonsArray.push(f)}c=new allmapObjects(e,d,c,parseInt(tileNames[c].w),parseInt(tileNames[c].h),tempImages[g],1,!0);c.draw();objectsArray.push(c)}else noBuildTiles.includes(c)&&(c=new allmapObjects(e,d,c,parseInt(tileNames[c].w),parseInt(tileNames[c].h),tempImages[g],1,!0),c.draw(),objectsArray.push(c))});
document.getElementsByClassName("walletacc")[0].innerText=b.wallet;updateUserStats(b,!0);dayNightSystem();NightLoop();2<=performanceMode?decorateMap():document.getElementById("backdecor").remove();document.getElementsByClassName("screen-lock-text")[0].innerText="Loading custom map assets...";redrawMapCells();windowResize();checkDynamicEffects();mapReadyLoaded();document.getElementsByClassName("optionbtn")[0].style.display="block";b=document.querySelectorAll(".backstats");for(var a=0;a<b.length;a++)b[a].style.display=
"block";depositCoord.updated||prepareMatrixPath();tooltipsStart();generateQuest();firstTimeLoading=!1;pendingArrayJobs.forEach(function(c){giveVillagerJob(c)});mapZoom();loadingScreen(!1)}
function mapZoom(){var b=document.querySelector("#gamewrapper"),a=document.querySelector("#gamewrapper"),c=.6;a.addEventListener("wheel",function(f){f.preventDefault();var e=c;c=0<f.deltaY/100?restNumbers(c,.03):sumNumbers(c,.03);c=parseFloat(gsap.utils.clamp(.5,.9,c));e=c-e;var g=d("scaleX"),h=d("x"),k=d("y"),l=a.getBoundingClientRect(),n=(f.clientX-(l.left+l.width/2))/g;f=(f.clientY-(l.top+l.height/2))/g;ratio=c;gsap.set(b,{scale:c,x:h-n*e,y:k-f*e});void 0!=Draggable.get("#gamemap")&&Draggable.get("#gamemap").applyBounds(window)});
var d=gsap.getProperty(b)}
function tooltipsStart(){1<=performanceMode&&(tippy(".buildbutton",{content:"Buildings"}),tippy(".roadbutton",{content:"Map Editor"}),tippy(".inventorysystem",{content:"Coming Soon"}),tippy(".refersystem",{content:"Referrals"}),tippy(".exchangesystem",{content:"Exchange"}),tippy(".questsystem",{content:"Quests"}),tippy(".optionbtn",{content:"Options"}),tippy(".foodquant",{content:"Food"}),tippy(".woodquant",{content:"Wood"}),tippy(".goldquant",{content:"Coins"}),tippy(".coalquant",{content:"Coal"}),
tippy(".walletacc",{content:"Logged Wallet"}),tippy(".realquant",{content:"Game Time"}))}
function generateQuest(){var b=document.createElement("div");for(b.id=26;;){var a=getRandomInt(4,68)*tileSize;var c=getRandomInt(4,68)*tileSize-30;b.style.top=c+"px";b.style.left=a+"px";if(checkPosDropped(b,!0,tileNames[b.id].w,tileNames[b.id].h+tileSize,a,c,void 0))break}matrix[parseInt((c+tileSize)/tileSize)][parseInt(a/tileSize)]=1;easystar.setGrid(matrix);document.getElementById("gamemap").insertAdjacentHTML("beforeend",'<div style="left:'+a+"px;top:"+c+'px" class="questopen" onclick="openchest(true)"><img class="questexcl" style="margin-left:18px;margin-top:-30px" src="/styles/img/excl.webp"><img class="questopenimg" src="/styles/img/gamechest.webp"/></div>')}
function openchest(b){loadingScreen(!0);if(b&&void 0!=document.querySelectorAll('[data-chestopen="chest"]')[0])return loadingScreen(!1),!1;postData(apiLink+"/getchest","POST",{}).then(function(a){if(1==a.result){var c=a.goldchest,d=a.prob,f=a.cost,e=parseInt(a.date),g="None";a=a.winner;0==e?e="None":(g='<a href="'+blockeExplorerUrl+"/address/"+a+'" target="_blank">'+a.replace(a.substring(6,36),"****")+"</a>",e=(new Date(e)).toLocaleString());a='class="smallbtn disablebtn"';parseFloat(userInfo.gold)>=
f&&(a='onclick="openChestNow(this)" class="smallbtn openchestnow"');a="<div "+a+'><div class="innersmall">Open</div></div>';b?(createDivs('<div class="container"><div class="row nopd"><div class="col nopd center">Mystery Chest: <span onclick="openchest(false)" class="reloadbtnr2"><img src="/styles/img/reloadbtn.png"/></span></div></div></div></div><div data-chestopen="chest" class="containedmiddiv"><div class="texthouse center">Chance to open the chest: <span class="text-warning txtprobi">'+d+'%</span></br>Chest value: <span class="text-warning txtchvaluech">'+
c+'</span> Gold <img class="miniiconcoin" src="/styles/img/goldicon.png"></br>Price to open it: <span class="text-warning txtpricevaluech">'+f+'</span> Gold <img class="miniiconcoin" src="/styles/img/goldicon.png"/><div class="separatorline"></div>Last winner: <span class="text-warning txtlastwinnerchest">'+g+'</span></br>Date: <span class="text-warning txtdatewinner">'+e+"</span></div>","createddiv newwidthdiv",a),tippy(".reloadbtnr2",{content:"Update Data"})):(makeNotif(0,"Data updated"),document.getElementsByClassName("txtprobi")[0].innerText=
d+"%",document.getElementsByClassName("txtchvaluech")[0].innerText=c,document.getElementsByClassName("txtpricevaluech")[0].innerText=f,document.getElementsByClassName("txtlastwinnerchest")[0].innerHTML=g,document.getElementsByClassName("txtdatewinner")[0].innerText=e)}else postResultFalse(a);loadingScreen(!1)})}
function openChestNow(b){if(b.classList.contains("disablebtn"))return!1;document.getElementsByClassName("openchestnow")[0].classList.contains("disablebtn")||document.getElementsByClassName("openchestnow")[0].classList.add("disablebtn");loadingScreen(!0);postData(apiLink+"/openchest","POST",{}).then(function(a){if(1==a.result){userInfo.quests=a.quests;loadQuestPanel();var c=a.goldchest,d=a.prob,f=parseFloat(a.cost),e=parseInt(a.date),g="None",h=a.winner;0==e?e="None":(g='<a href="'+blockeExplorerUrl+
"/address/"+h+'" target="_blank">'+h.replace(h.substring(6,36),"****")+"</a>",e=(new Date(e)).toLocaleString());parseFloat(userInfo.gold)<f&&(document.getElementsByClassName("openchestnow")[0].classList.contains("disablebtn")||document.getElementsByClassName("openchestnow")[0].classList.add("disablebtn"));void 0!=document.querySelectorAll('[data-chestopen="chest"]')[0]&&(b=b.parentNode.parentNode.parentNode.parentNode,TweenLite.to(b,.1,{onComplete:function(){TweenLite.to(b,.1,{onComplete:function(){TweenLite.to(b,
.1,{onComplete:function(){TweenLite.to(b,.1,{y:"+=20",yoyo:!0,repeat:5})},y:"-=20",yoyo:!0,repeat:5})},x:"+=20",yoyo:!0,repeat:5})},x:"-=20",yoyo:!0,repeat:5}));setTimeout(function(){if(a.success){makeNotif(0,"Congratulations, you managed to open the chest");var k=document.getElementsByClassName("txtchvaluech")[0].getBoundingClientRect();if(1<=performanceMode){if(0<a.ggold){var l=Math.floor(99999*Math.random());document.body.insertAdjacentHTML("beforeend",'<div class="quantoncutfood d'+l+'" style="left: '+
k.left+"px; top: "+k.top+'px;"><span class="quantanimated">+ '+a.ggold+'</span><img src="/styles/img/goldicon.png"></div>');k=document.getElementsByClassName("goldicon")[0].getBoundingClientRect();TweenLite.to(".d"+l,2,{onComplete:function(){document.getElementsByClassName("d"+l)[0].remove()},left:k.left,top:k.top})}}else 0<a.ggold&&showItemMoveQuant("","goldicon",a.ggold,!1)}else if(makeNotif(1,"It seems you have had no luck"),k=document.getElementsByClassName("goldicon")[0].getBoundingClientRect(),
1<=performanceMode){if(0<a.ggold){var n=Math.floor(99999*Math.random());document.body.insertAdjacentHTML("beforeend",'<div class="quantoncutfood d'+n+'" style="left: '+k.left+"px; top: "+k.top+'px;"><span class="quantanimated">- '+a.ggold+'</span><img src="/styles/img/goldicon.png"></div>');k=document.getElementsByClassName("txtchvaluech")[0].getBoundingClientRect();TweenLite.to(".d"+n,1.5,{onComplete:function(){document.getElementsByClassName("d"+n)[0].remove()},left:k.left,top:k.top})}}else 0<a.ggold&&
showItemMoveQuant("","goldicon",-a.ggold,!1);updateUserStats(a,!1);document.getElementsByClassName("txtprobi")[0].innerText=d+"%";document.getElementsByClassName("txtchvaluech")[0].innerText=c;document.getElementsByClassName("txtpricevaluech")[0].innerText=f;document.getElementsByClassName("txtlastwinnerchest")[0].innerHTML=g;document.getElementsByClassName("txtdatewinner")[0].innerText=e;parseFloat(userInfo.gold)>=f&&document.getElementsByClassName("openchestnow")[0].classList.contains("disablebtn")&&
document.getElementsByClassName("openchestnow")[0].classList.remove("disablebtn")},1500)}else postResultFalse(a);loadingScreen(!1)})}var villagerJobs={};function createVillager(b){if(2>performanceMode)return!1;var a=spawnVillager(Math.round((depositCoord.posx+buildings[100].w/2-15)/tileSize)*tileSize,Math.round((depositCoord.posy+buildings[100].h)/tileSize)*tileSize);b?pendingArrayJobs.push(a):giveVillagerJob(a)}
function giveVillagerJob(b){void 0!=document.querySelectorAll('[data-hand="'+b+'"]')[0]&&document.querySelectorAll('[data-hand="'+b+'"]')[0].remove();villagerJobs[b]={status:"running",jobs:[]};if(1<Object.keys(housesStaticOnMap).length){var a=changeTimezone(),c=Object.entries(housesStaticOnMap).filter(function(g){g=$jscomp.makeIterator(g);g.next();g=g.next().value;return 100!==g.id&&105!==g.id&&g.time<a.getTime()});if(0>=c.length)return!1;c=c[Math.floor(Math.random()*c.length)];var d=c[0];c=c[1];
var f=parseInt(d.split(";")[0]);f=Math.floor((f+buildings[c.id].w/2)/tileSize);d=parseInt(d.split(";")[1]);d=Math.floor((d+buildings[c.id].h)/tileSize);var e=[];e.push({type:"move",posx:f,posy:d});e.push({type:"collect",posx:f,posy:d,buildid:c.id});e.push({type:"move",posx:Math.round((depositCoord.posx+buildings[100].w/2-15)/tileSize),posy:Math.round((depositCoord.posy+buildings[100].h)/tileSize)});villagerJobs[b]={status:"running",jobs:e};doJobs(b)}}
function getRandomInt(b,a){b=Math.ceil(b);a=Math.floor(a);return Math.floor(Math.random()*(a-b)+b)}
function doJobs(b){var a=document.querySelectorAll('[data-villagerid="'+b+'"]')[0];if(void 0==a)return!1;if(0<villagerJobs[b].jobs.length){var c=villagerJobs[b].jobs.shift();"move"===c.type?moveVillager(c.posx,c.posy,b,!1):"collect"===c.type&&(document.getElementById("gamemap").insertAdjacentHTML("beforeend",'<div data-vthink="'+b+'" class="villagerthink" style="left:'+a.style.left+";top:"+a.style.top+'"><div data-cthink="'+b+'" class="thinkcontent"><span class="thinkinggif"></span></div>'),setTimeout(function(){void 0!=
document.querySelectorAll('[data-vthink="'+b+'"]')[0]&&document.querySelectorAll('[data-vthink="'+b+'"]')[0].remove();var d=c.buildid;void 0!=buildings[d].dailyfood?a.innerHTML='<div data-hand="'+b+'" class="foodicon villagerhold"></div>':void 0!=buildings[d].dailycoins&&(a.innerHTML='<div data-hand="'+b+'" class="goldicon villagerhold"></div>');0<villagerJobs[b].jobs.length?doJobs(b):giveVillagerJob(b)},getRandomInt(3E3,5E3)))}else giveVillagerJob(b)}
function checkDynamicEffects(){Object.entries(housesStaticOnMap).forEach(function(b){var a=$jscomp.makeIterator(b);b=a.next().value;a=a.next().value;if(void 0==a.id)return!1;if(105==a.id){var c=parseInt(b.split(";")[0]);b=parseInt(b.split(";")[1]);1<=performanceMode&&1==a.villagers&&void 0==document.getElementsByClassName("smk"+c+";"+b)[0]&&document.getElementById("gamemap").insertAdjacentHTML("beforeend","<span class='smoke smk"+c+";"+b+"' style='top:"+(b-60)+"px;left:"+(c-19)+"px;'></span>")}})}
function convertRoads(b){b=$jscomp.makeIterator(b.split(";"));for(var a=b.next();!a.done;a=b.next()){var c=a.value;if(""!=c){a=parseInt(c.split(",")[0]);var d=parseInt(c.split(",")[1]);c=parseInt(c.split(",")[2]);a=new cells(a,d,tilePreloadMap[c].w,tilePreloadMap[c].h,tilePreloadMap[c].image,c);cellsArray.push(a)}}}function dayNightSystem(){setInterval(function(){NightLoop()},5E3)}
function NightLoop(){var b=changeTimezone(),a=parseInt(b.getHours());b=parseInt(b.getMinutes());10>b&&(b="0"+b);document.getElementsByClassName("realquant")[0].innerText=a+":"+b;if(1>performanceMode)return!1;nighthours.includes(a)?(a=hoursopacity[nighthours.indexOf(a)],convertedNight||(convertedNight=!0,buildsToNight(convertedNight))):(a=0,convertedNight&&(convertedNight=!1,buildsToNight(convertedNight)));a!=lastopacity&&(TweenLite.to(".nightfilter",1,{opacity:a}),lastopacity=a)}
function buildsToNight(b){b?Object.entries(housesStaticOnMap).forEach(function(a){a=$jscomp.makeIterator(a);var c=a.next().value;a=a.next().value;if(void 0==a.id)return!1;var d=parseInt(c.split(";")[0]);c=parseInt(c.split(";")[1]);var f=a.id,e=changeTimezone();a.time<e.getTime()&&setBuildingLight(f,d,c)}):contextlights.clearRect(0,0,5100,5100)}function roundPartial(b){var a=Math.pow(10,b||0);return function(c){return Math.round(c*a)/a}}
function updateUserStats(b,a){1<=performanceMode&&(null!=gsapfood&&gsapfood.kill(),null!=gsapwood&&gsapwood.kill(),null!=gsapgold&&gsapgold.kill(),null!=gsapcoal&&gsapcoal.kill());a?(void 0!=userInfo.wood&&(userInfo.wood=parseInt(b.wood),document.getElementsByClassName("woodquant")[0].innerText=userInfo.wood),void 0!=userInfo.gold&&(userInfo.gold=parseFloat(b.gold).toFixed(2),document.getElementsByClassName("goldquant")[0].innerText=userInfo.gold),void 0!=userInfo.food&&(userInfo.food=parseInt(b.food),
document.getElementsByClassName("foodquant")[0].innerText=userInfo.food),void 0!=userInfo.coal&&(userInfo.coal=parseInt(b.coal),document.getElementsByClassName("coalquant")[0].innerText=userInfo.coal)):(void 0!=b.food&&(1<=performanceMode?(gsapfood=TweenLite.to(".foodquant",1.5,{innerHTML:b.food,modifiers:{innerHTML:roundPartial(0)}}),userInfo.food=parseInt(b.food)):(userInfo.food=parseInt(b.food),document.getElementsByClassName("foodquant")[0].innerText=userInfo.food)),void 0!=b.wood&&(1<=performanceMode?
(gsapwood=TweenLite.to(".woodquant",1.5,{innerHTML:b.wood,modifiers:{innerHTML:roundPartial(0)}}),userInfo.wood=parseInt(b.wood)):(userInfo.wood=parseInt(b.wood),document.getElementsByClassName("woodquant")[0].innerText=userInfo.wood)),void 0!=b.gold&&(1<=performanceMode?(gsapgold=TweenLite.to(".goldquant",1.5,{innerHTML:b.gold,modifiers:{innerHTML:roundPartial(2)}}),userInfo.gold=parseFloat(b.gold).toFixed(2)):(userInfo.gold=parseFloat(b.gold).toFixed(2),document.getElementsByClassName("goldquant")[0].innerText=
userInfo.gold)),void 0!=b.coal&&(1<=performanceMode?(gsapcoal=TweenLite.to(".coalquant",1.5,{innerHTML:b.coal,modifiers:{innerHTML:roundPartial(0)}}),userInfo.coal=parseInt(b.coal)):(userInfo.coal=parseInt(b.coal),document.getElementsByClassName("coalquant")[0].innerText=userInfo.coal)));getWareHouseContent()}function mapInteract(){[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(b){return new bootstrap.Tooltip(b,{html:!0})})}
function Bounds(b,a,c){var d=window;b.applyBounds({top:65,left:0,width:d.innerWidth-a,height:d.innerHeight-c})}function appendProgressBar(b,a,c){b.innerHTML="<div class='pr"+a+"' id='progressBar'><div class='progressText'>"+c+"</div><div class='bar'></div></div>"}
function buildingFunctions(){Draggable.create("#gamemap",{bounds:window,type:"x,y",inertia:!0,edgeResistance:1,zIndexBoost:!1,throwResistance:2E3,onClick:function(b){b.stopImmediatePropagation();b.stopPropagation();b.preventDefault();clickOnMap(b)},onPress:function(b){b.stopImmediatePropagation();b.stopPropagation();b.preventDefault();draggingObject&&this.endDrag()},onDragStart:function(){draggingMap=!0},onThrowComplete:function(){var b=parseInt(this.x),a=parseInt(this.y);localStorage.setItem(userInfo.account+
"mapX",b);localStorage.setItem(userInfo.account+"mapY",a);TweenLite.set(this.target,{x:b,y:a});draggingMap=!1}});dragdivs.forEach(function(b){dragDivsWindow.push("drag"+b);Draggable.create(".drag"+b,{onPress:function(){Bounds(this,0,75);zindexWindow+=1;this.target.style.zIndex=zindexWindow},onDragEnd:function(a){zindexWindow+=1;this.target.style.zIndex=zindexWindow},type:"x,y",inertia:!1,edgeResistance:1,zIndexBoost:!1,autoScroll:!0,minimumMovement:10,trigger:"#"+b})});document.getElementsByClassName("closecontainer")[0].addEventListener("click",
function(){clickSound.play();isVisible(document.getElementsByClassName("draghead")[0])&&hide(document.getElementsByClassName("draghead")[0]);document.getElementsByClassName("containercontenttop")[0].innerHTML="";document.getElementsByClassName("containercontentmedium")[0].innerHTML="";document.getElementsByClassName("containercontentbottom")[0].innerHTML=""});document.getElementsByClassName("closecontainer3")[0].addEventListener("click",function(){clickSound.play();closeForcePanelHouse()});document.getElementsByClassName("closecontainer2")[0].addEventListener("click",
function(){clickSound.play();forceCloseContainerHouse(!0)});document.getElementsByClassName("closecontainer5")[0].addEventListener("click",function(){clickSound.play();isVisible(document.getElementsByClassName("draghead5")[0])&&hide(document.getElementsByClassName("draghead5")[0]);0>=parseFloat(localStorage.getItem("globalmusic"))&&backgroundSound.stop()});document.getElementsByClassName("closecontainer6")[0].addEventListener("click",function(){clickSound.play();isVisible(document.getElementsByClassName("draghead6")[0])&&
hide(document.getElementsByClassName("draghead6")[0])});document.getElementsByClassName("closecontainer7")[0].addEventListener("click",function(){clickSound.play();isVisible(document.getElementsByClassName("draghead7")[0])&&hide(document.getElementsByClassName("draghead7")[0])});document.getElementsByClassName("optionbtn")[0].addEventListener("click",function(){clickSound.play();backgroundSound.playing()||backgroundSound.play();var b=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),a=window.navigator.userAgent.toLowerCase().includes("mobi"),
c="";b||a||(c='<span class="mobileqrcode"><i class="bi bi-phone"></i></span>');document.getElementsByClassName("midcontaineroptions")[0].innerHTML='\n\t\t<div id="carrouselQuality" class="carousel slide" data-bs-ride="carousel">\n\t\t\t<div class="carousel-inner">\n\t\t\t\t<div data-qchose="2" class="carousel-item rounded">\n\t\t\t\t\t<img src="/styles/img/qualityhigh.webp" alt="MediTown high quality settings"/>\n\t\t\t\t\t<div class="qualitytext">\n\t\t\t\t\t\t<p>Quality: High</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div data-qchose="1" class="carousel-item rounded">\n\t\t\t\t\t<img src="/styles/img/qualitymedium.webp" alt="MediTown high quality settings"/>\n\t\t\t\t\t<div class="qualitytext">\n\t\t\t\t\t\t<p>Quality: Medium</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div data-qchose="0" class="carousel-item rounded">\n\t\t\t\t\t<img src="/styles/img/qualitylow.webp" alt="MediTown high quality settings"/>\n\t\t\t\t\t<div class="qualitytext">\n\t\t\t\t\t\t<p>Quality: Low</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<select class="form-select gamequality" aria-label="Select Game Quality:">\n\t\t\t<option disabled>Select game quality:</option>\n\t\t\t<option value="0">Low</option>\n\t\t\t<option value="1">Medium</option>\n\t\t\t<option value="2" active>High</option>\n\t\t</select>\n\t\t<div style="margin: 10px 0 10px 0;"></div>\n\t\t<span class="nftselectedtext texthouse">'+
c+"<center>NFT Selected: #"+localStorage.getItem("nftselected")+'</center></br>\n\t\tBackground Volume:<input type="range" class="form-range" min="0" max="1" value="'+localStorage.getItem("globalmusic")+'" step="0.05" id="backvolumecontrol"></br>\n\t\tEffects Volume:<input type="range" class="form-range" min="0" max="1" value="'+localStorage.getItem("globaleffects")+'" step="0.05" id="effectvolumecontrol">\n\t\t</span>\n\t\t<div class="buttonlists"><div class="smallbtn savesettings disablebtn"><div class="innersmall">Save</div></div><div class="smallbtn logout satfilter1"><div class="innersmall">LogOut</div></div></div>\n\t\t<span class="textadvise">Website reload is required</span>';
b||a||(tippy(".mobileqrcode",{content:"Mobile QR Code"}),document.getElementsByClassName("mobileqrcode")[0].addEventListener("click",function(e){e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();if(void 0!=document.querySelectorAll('[data-qrcode="mobile"]')[0])return!1;createDivs('Mobile QR Code:</div><div data-qrcode="mobile" class="containedmiddiv"><div class="texthouse center"><span class="textqrcodecontent">Now you can play MediTown on mobile from any browser without the need for MetaMask. You only need to generate a QR code and scan it from your mobile device from our website.</br><b style="color:#ad4c4c">Attention</b>: Be careful and do not display the QR code publicly as they will be able to access your account. For more information, remember to read on the WIKI how the QR code works.</span><span class="qrcodecontent"></span></div>',
"createddiv newwidthdiv",'<div onclick="generateQRCode(this)" class="smallbtn btncodegenerator"><div class="innersmall">Get QR</div></div>')}));document.getElementsByClassName("gamequality")[0].value=performanceMode;document.getElementById("backvolumecontrol").addEventListener("input",function(e){e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();e=parseFloat(e.target.value);backgroundSound.volume(e);localStorage.setItem("globalmusic",e)});document.getElementById("effectvolumecontrol").addEventListener("click",
function(e){e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();clickSound.play()});document.getElementById("effectvolumecontrol").addEventListener("input",function(e){e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();e=parseFloat(e.target.value);clickSound.volume(e);localStorage.setItem("globaleffects",e)});void 0!=document.querySelectorAll('[data-qchose="'+performanceMode+'"]')[0]&&document.querySelectorAll('[data-qchose="'+performanceMode+'"]')[0].classList.add("active");
document.getElementsByClassName("logout")[0].addEventListener("click",function(e){e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();localStorage.removeItem("mobilevers");localStorage.removeItem("useraccount");localStorage.removeItem("userkey");localStorage.setItem("nftselected",-1);window.location.reload();return!1});var d=performanceMode,f=performanceMode;document.querySelector(".gamequality").addEventListener("change",function(e){e.stopImmediatePropagation();e.stopPropagation();
e.preventDefault();e=parseInt(e.target.value);void 0!=document.querySelectorAll('[data-qchose="'+f+'"]')[0]&&document.querySelectorAll('[data-qchose="'+f+'"]')[0].classList.remove("active");void 0!=document.querySelectorAll('[data-qchose="'+d+'"]')[0]&&document.querySelectorAll('[data-qchose="'+d+'"]')[0].classList.remove("active");void 0!=document.querySelectorAll('[data-qchose="'+e+'"]')[0]&&document.querySelectorAll('[data-qchose="'+e+'"]')[0].classList.add("active");void 0!=document.getElementsByClassName("savesettings")[0]&&
document.getElementsByClassName("savesettings")[0].classList.contains("disablebtn")&&document.getElementsByClassName("savesettings")[0].classList.remove("disablebtn");d=e});document.getElementsByClassName("savesettings")[0].addEventListener("click",function(e){e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();if(this.classList.contains("disablebtn"))return!1;this.classList.add("disablebtn");performanceMode=d;localStorage.setItem("performance",performanceMode);window.location.reload()});
isVisible(document.getElementsByClassName("draghead5")[0])||show(document.getElementsByClassName("draghead5")[0])});document.getElementsByClassName("closequest")[0].addEventListener("click",function(b){b.stopImmediatePropagation();b.stopPropagation();b.preventDefault();clickSound.play();isVisible(document.getElementById("quests"))&&hide(document.getElementById("quests"))});document.getElementsByClassName("questsystem")[0].addEventListener("click",function(b){b.stopImmediatePropagation();b.stopPropagation();
b.preventDefault();clickSound.play();isVisible(document.getElementById("quests"))?hide(document.getElementById("quests")):(loadQuestPanel(),show(document.getElementById("quests")))});document.getElementsByClassName("exchangesystem")[0].addEventListener("click",function(b){b.stopImmediatePropagation();b.stopPropagation();b.preventDefault();if(this.classList.contains("disablebtn"))return!1;clickSound.play();isVisible(document.getElementsByClassName("draghead7")[0])||show(document.getElementsByClassName("draghead7")[0]);
b="";b=0==Object.keys(exchTrans).length?'<tbody class="exchtablecontent"><tr><td colspan="5"><center>You don\'t have any transactions yet</center></td></tr></tbody>':'<tbody class="exchtablecontent">'+renderExchContent(!0)+"</tbody>";document.getElementsByClassName("midcontaineroptionex")[0].innerHTML='<div class="classexchange"><div class="texthouse txtph3">Wallet Balance: <span class="busdbalance">loading...</span> USDT <img class="busdstyle1" src="/styles/img/usdticon.png"/></br>Exchange rate: 1 - 1</br>Minimum exchange of 2 USDT</br>Fee of 1 USDT for each exchange</br></br>\n\t\t\t<center>Exchange <span class="valueexch">2.0</span> USDT for <span class="valueexch2">1.0</span> Coins</br><div class="rangeexch">\n\t\t\t\t<span class="leftexch">\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">\n\t\t\t\t\t\t<path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</span>\n\t\t\t\t<input type="range" class="form-range" min="2" max="2" value="2.0" step="0.1" id="inputexchange" disabled>\n\t\t\t\t<span class="rightexch">\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">\n\t\t\t\t\t\t<path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t</div><div class="buttonlists"><div class="smallbtn exchangenow disablebtn"><div class="innersmall">Exchange</div></div><div class="smallbtn switchwithdraw satfilter1"><div class="innersmall">Withdraw</div></div></div><center><span class="textadvise">Metamask will open when you press the button</span></center>\n\t\t\t</div>\n\n\t\t\t<div class="exchexchange">\n\t\t\t\t<div class="texthouse txtph3">Minimum to withdraw is 2.5 Gold <img class="miniiconhouse" src="/styles/img/goldicon.png"></br>Fee of 5% USDT for each withdraw</br>Only 1 withdrawal every 7 days</br>Withdraw available: <span class="withdrtime">'+
getWithdrawStatus(!0)+'</span></br></br>\n\t\t\t<center>Withdraw <span class="valuewithdraw">2.5</span> USDT</br><div class="rangeexch">\n\t\t\t\t<span class="leftwithd">\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">\n\t\t\t\t\t\t<path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</span>\n\t\t\t\t<input type="range" class="form-range" min="2.5" max="'+
userInfo.gold+'" value="2.5" step="0.1" id="inputwithdraw" disabled>\n\t\t\t\t<span class="rightwithd">\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">\n\t\t\t\t\t\t<path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t</div><div class="buttonlists"><div class="smallbtn switchexch satfilter1"><div class="innersmall">Exchange</div></div><div class="smallbtn withdrawnow disablebtn"><div class="innersmall">Withdraw</div></div></div><center><span class="textadvise">Be careful, NO confirmation on click</span></center>\n\t\t\t</div>\n\t\t\t<div class="texthouse txtph txtph2"><table class="table table-secondary tabletp"><thead><tr><th scope="col">#</th><th scope="col">Hash</th><th scope="col">Value</th><th scope="col">Fee</th><th scope="col">Type<span class="fixtransact"><i class="bi bi-hammer"></i></span></th></tr></thead>'+
b+'</table></div><span class="textadvise">If your transaction is not listed, use the !help command in chat</span>\n\t\t</center>\n\t\t';tippy(".fixtransact",{content:"Manual Hash Import"});document.getElementsByClassName("fixtransact")[0].addEventListener("click",function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();if(void 0!=document.querySelectorAll('[data-manualimport="hash"]')[0])return!1;createDivs('Manual Hash Import:</div><div data-manualimport="hash" class="containedmiddiv"><div class="texthouse center">Insert the transaction hash:</br><div style="margin: 10px 0 10px 0;"></div><input id="texthashinput" maxlength="66" autocomplete="0"></br><span class="textadvise">Example: 0xxxxxxxxxxxxxxxxxxxxx</span></div>',
"createddiv newwidthdiv",'<div onclick="checkHashManual(this)" class="smallbtn"><div class="innersmall">Check</div></div>')});getBalanceBUSD("busdbalance","inputexchange","exchangenow");document.getElementsByClassName("switchwithdraw")[0].addEventListener("click",function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();isVisible(document.getElementsByClassName("classexchange")[0])&&(document.getElementById("inputwithdraw").value=2.5,document.getElementsByClassName("classexchange")[0].style.display=
"none",document.getElementsByClassName("exchexchange")[0].style.display="block",a=parseFloat(userInfo.gold),1E3<a&&(a=1E3),document.getElementById("inputwithdraw").setAttribute("max",a),document.getElementsByClassName("withdrtime")[0].innerHTML="Loading...",getWithdrawStatus(!1))});document.getElementsByClassName("leftwithd")[0].addEventListener("click",function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();a=parseFloat(document.getElementById("inputwithdraw").value).toFixed(1);
2.5<a&&(document.getElementById("inputwithdraw").value=restNumbers(a,.1),document.getElementsByClassName("valuewithdraw")[0].innerText=parseFloat(restNumbers(a,.1)).toFixed(1))});document.getElementsByClassName("rightwithd")[0].addEventListener("click",function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();a=document.getElementById("inputwithdraw").value;a=sumNumbers(a,.1);1E3>a&&a<=parseFloat(userInfo.gold)&&(document.getElementById("inputwithdraw").value=a,document.getElementsByClassName("valuewithdraw")[0].innerText=
parseFloat(a).toFixed(1))});document.getElementsByClassName("switchexch")[0].addEventListener("click",function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();isVisible(document.getElementsByClassName("exchexchange")[0])&&(document.getElementById("inputexchange").value=2,document.getElementsByClassName("classexchange")[0].style.display="block",document.getElementsByClassName("exchexchange")[0].style.display="none")});document.getElementsByClassName("exchangenow")[0].addEventListener("click",
function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();if(this.classList.contains("disablebtn"))return!1;loadingScreen(!0);this.classList.add("disablebtn");startTransac(this)});document.getElementsByClassName("withdrawnow")[0].addEventListener("click",function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();a=changeTimezone().getTime();if(this.classList.contains("disablebtn")||userInfo.withdrawTime>a||!depositCoord.updated)return!1;a=parseFloat(document.getElementById("inputwithdraw").value);
if(0>restNumbers(userInfo.gold,a))return makeNotif(0,"You do not have the amount of gold you are trying to withdraw"),!1;loadingScreen(!0);postData(apiLink+"/withdraw/"+a,"POST",{}).then(function(c){1==c.result?(userInfo.withdrawTime=c.timewithdraw,exchTrans=c.transactions,document.getElementById("inputwithdraw").value=2.5,document.getElementById("inputwithdraw").setAttribute("max",parseFloat(c.gold)),0<restNumbers(userInfo.gold,2.5)?document.getElementById("inputwithdraw").disabled=!1:document.getElementById("inputwithdraw").disabled=
!0,updateUserStats(c,!1),renderExchContent(!1),getWithdrawStatus(!1),makeNotif(0,"Withdrawn requested")):postResultFalse(c);loadingScreen(!1)})});document.getElementsByClassName("leftexch")[0].addEventListener("click",function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();a=parseFloat(document.getElementById("inputexchange").value);2<a&&(document.getElementById("inputexchange").value=restNumbers(a,.1),document.getElementsByClassName("valueexch")[0].innerText=parseFloat(restNumbers(a,
.1)).toFixed(1),document.getElementsByClassName("valueexch2")[0].innerText=parseFloat(restNumbers(a,1.1)).toFixed(1))});document.getElementsByClassName("rightexch")[0].addEventListener("click",function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();a=parseFloat(document.getElementById("inputexchange").value);a=sumNumbers(a,.1);a<=parseFloat(document.getElementById("inputexchange").getAttribute("max"))&&(document.getElementById("inputexchange").value=a,a=parseFloat(a).toFixed(1),
document.getElementsByClassName("valueexch")[0].innerText=a,document.getElementsByClassName("valueexch2")[0].innerText=parseFloat(a-1).toFixed(1))});document.getElementById("inputexchange").addEventListener("input",function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();a=parseFloat(a.target.value);document.getElementsByClassName("valueexch")[0].innerText=parseFloat(a).toFixed(1);document.getElementsByClassName("valueexch2")[0].innerText=parseFloat(a-1).toFixed(1)});document.getElementById("inputwithdraw").addEventListener("input",
function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();a=parseFloat(a.target.value);document.getElementsByClassName("valuewithdraw")[0].innerText=a})});document.getElementsByClassName("refersystem")[0].addEventListener("click",function(b){b.stopImmediatePropagation();b.stopPropagation();b.preventDefault();if(this.classList.contains("disablebtn"))return!1;clickSound.play();isVisible(document.getElementsByClassName("draghead6")[0])||show(document.getElementsByClassName("draghead6")[0]);
b="";b=0==Object.keys(referredP).length?'<tbody class="reftablecontent"><tr><td colspan="3"><center>You haven\'t invited anyone yet</center></td></tr></tbody>':'<tbody class="reftablecontent">'+renderRefContent(!0)+"</tbody>";document.getElementsByClassName("midcontaineroptionsr")[0].innerHTML='<center><div class="texthouse txtph2">Earn '+feeRef+' USDT for every deposit the referred person makes.<div class="copyref" onclick="copy(this);" role="alert">https://game.meditown.io/'+userInfo.reflink+'</div></div><a target="_blank" href="https://twitter.com/intent/tweet?text=Join%20with%20my%20referral%20link%20to%20MediTown%20and%20earn%201USDT%20free%20on%20your%20first%20deposit.&hashtags=nft,playtoearn,play2earn,meditown,nftgame,bsc&url=https%3A%2F%2Fgame.meditown.io%2F'+
userInfo.reflink+'"><img src="/styles/img/tweetbtn.png"/></a><div class="texthouse txtph txtph2"><table class="table table-secondary tabletp"><thead><tr><th scope="col">#</th><th scope="col">Wallet</th><th class="wd50px" scope="col"><div class="container"><div class="row nopd"><div class="col nopd">Won</div><div class="col nopd"><span class="reloadbtnr"><i class="bi bi-arrow-clockwise"></i></span></div></div></div></th></tr></thead>'+b+"</table></div></center>";tippy(".reloadbtnr",{content:"Update List"});
document.getElementsByClassName("reloadbtnr")[0].addEventListener("click",function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();loadingScreen(!0);postData(apiLink+"/referlist","POST",{}).then(function(c){1==c.result?(referredP=c.refers,makeNotif(0,"List updated"),renderRefContent(!1)):postResultFalse(c);loadingScreen(!1)})})});document.getElementsByClassName("buildbutton")[0].addEventListener("click",function(b){b.stopImmediatePropagation();b.stopPropagation();b.preventDefault();
clickSound.play();if(depositCoord.updated||void 0!=houses[100]){if(isVisible(document.getElementsByClassName("draghead2")[0]))return!1;show(document.getElementsByClassName("draghead2")[0]);buildMode()}else document.getElementsByClassName("containercontenttop")[0].innerHTML="<img class='wrhstart' src ='/styles/img/stockpile-sheet1.webp'></img>",document.getElementsByClassName("containercontentmedium")[0].innerHTML="<center>Buy a WareHouse for "+buildings[100].price+" Coins <span class='goldiconmin'></span></center>",
userInfo.gold<buildings[100].price?document.getElementsByClassName("containercontentbottom")[0].innerHTML="<div class='smallbtn disablebtn'><div class='innersmall'>Buy</div></div>":(document.getElementsByClassName("containercontentbottom")[0].innerHTML="<div class='smallbtn buyware'><div class='innersmall'>Buy</div></div>",document.getElementsByClassName("buyware")[0].addEventListener("click",function c(){var d=this;loadingScreen(!0);postData(apiLink+"/buyhouse/100","POST",{}).then(function(f){1==
f.result?(houses=f.houses,updateUserStats(f,!1),isVisible(document.getElementsByClassName("draghead")[0])&&hide(document.getElementsByClassName("draghead")[0]),isVisible(document.getElementsByClassName("draghead2")[0])||show(document.getElementsByClassName("draghead2")[0]),userInfo.maxroads=parseInt(f.roadquant),d.removeEventListener("click",c),buildMode()):postResultFalse(f);loadingScreen(!1)})})),isVisible(document.getElementsByClassName("draghead")[0])||show(document.getElementsByClassName("draghead")[0]),
isVisible(document.getElementsByClassName("draghead2")[0])&&hide(document.getElementsByClassName("draghead2")[0])})}
function generateQRCode(b){if(b.classList.contains("disablebtn"))return!1;loadingScreen(!0);postData(apiLink+"/getqrcode","POST",{}).then(function(a){a.result?(a=JSON.stringify({result:!0,wallet:a.wallet,nftselected:a.nftselected,key:a.key,mobile:a.mobile}),document.getElementsByClassName("qrcodecontent")[0].innerHTML="<img style='max-width: 260px;object-fit: none;' src='https://chart.googleapis.com/chart?chs=350x350&cht=qr&chl="+encodeURIComponent(a)+"'/>",document.getElementsByClassName("textqrcodecontent")[0].remove(),
document.getElementsByClassName("btncodegenerator")[0].classList.add("disablebtn")):postResultFalse(a);loadingScreen(!1)})}function checkHashManual(b){b=document.getElementById("texthashinput").value;if(""==b)return makeNotif(1,"Please insert a transaction hash"),!1;if(66!=b.length||!b.startsWith("0x"))return makeNotif(1,"Incorrect hash"),!1;loadingScreen(!0);checkHash(b,null)}
function loadQuestPanel(){var b="",a=-1,c=Object.entries(quests).sort(function(d,f){return d[1].type-f[1].type});Object.entries(c).forEach(function(d){d=$jscomp.makeIterator(d);d.next();var f=d.next().value;d=f[0];f=f[1];var e="";void 0!=f.description?e=f.description:void 0!=f.descid&&(e=quests[f.descid].description);var g=0,h="",k="";switch(f.type){case 2:e=e.replace("%",f.quant);g=100*parseInt(userInfo.quests.buildings)/f.quant;h="Buildings";k="bi-buildings";break;case 1:e=e.replace("%",f.invit);
g=100*parseInt(userInfo.quests.refer)/f.invit;h="Referrals";k="bi-person-fill";break;case 0:void 0!=userInfo.quests.warehouse&&(g=100);h="The Beginning";k="bi-1-square";break;case 3:e=e.replace("%",f.quant),g=100*parseInt(userInfo.quests.chests)/f.quant,h="Mystery Chest",k="bi-archive"}a!=f.type&&(a=f.type,b+='\n\t\t\t<li class="list-group-item">\n\t\t\t\t<div class="ms-2 me-auto">\n\t\t\t\t\t<div class="fw-bold center">'+h+"</div>\n\t\t\t\t</div>\n\t\t\t</li>");h='<div class="progress progressquest">\n\t\t\n\t\t<div class="progress-bar bgmd" role="progressbar" style="width: '+
(g+'%" aria-valuenow="'+g+'" aria-valuemin="0" aria-valuemax="100"></div>\n\t\t\n\t\t</div>');void 0!=userInfo.quests["quest"+d]&&(h='<span class="text-success fwquests">Claimed</span>');b+='\n\t\t<li class="list-group-item">\n\t\t\t<i class="bi '+k+' iconquests"></i>\n\t\t\t<div onclick="getQuest(this,'+d+",'"+e+"',"+g+')" class="questclick ms-2 me-auto">\n\t\t\t\t<div class="fw-bold">'+f.name+"</div>\n\t\t\t\t"+h+"\n\t\t\t</div>\n\t\t</li>"});document.getElementsByClassName("questgroup")[0].innerHTML=
b}
function getQuest(b,a,c,d){if(void 0!=document.querySelectorAll('[data-questopen="'+a+'"]')[0])return!1;b=quests[a].name;var f=0,e=0,g="",h='[<span class="text-danger questclaimtxt'+a+'">Unclaimed</span>]',k=0;switch(quests[a].type){case 2:f=parseInt(quests[a].quant);void 0!=userInfo.quests.buildings&&(e=parseInt(userInfo.quests.buildings));break;case 1:f=quests[a].invit;void 0!=userInfo.quests.refer&&(e=parseInt(userInfo.quests.refer));break;case 0:f=1;void 0!=userInfo.quests.warehouse&&(e=1);break;
case 3:f=parseInt(quests[a].quant),void 0!=userInfo.quests.chests&&(e=parseInt(userInfo.quests.chests))}void 0!=userInfo.quests["quest"+a]&&(k=1,h='[<span class="text-success">Claimed</span>]');var l='<div class="smallbtn disablebtn"><div class="innersmall">Claim</div></div>';0==k&&e>=f&&(l='<div onclick="claimQuest(this,'+a+')" class="smallbtn"><div class="innersmall">Claim</div></div>');void 0!=quests[a].reward&&(g='<span class="text-warning">'+quests[a].reward+' Gold <img id="iconquest'+a+'" class="miniiconhouse" src="/styles/img/goldicon.png"/></span>');
createDivs(b+':</div><div data-questopen="'+a+'" class="containedmiddiv"><div class="texthouse center">Quest Description:</br><span class="text-warning">'+c+'</span></br></br>Progress:</br><span class="text-warning">'+e+" / "+f+'</span></br><center><div class="progress progressquest"> <div class="progress-bar bgmd" role="progressbar" style="width: '+d+'%" aria-valuenow="'+d+'" aria-valuemin="0" aria-valuemax="100"></div></div></center></br>Reward '+h+":</br> "+g+"</div>","createddiv newwidthdiv",
l)}
function claimQuest(b,a){if(b.classList.contains("disablebtn"))return!1;loadingScreen(!0);postData(apiLink+"/claimquest/"+a,"POST",{}).then(function(c){if(c.result){b.classList.add("disablebtn");void 0!=document.getElementsByClassName("questclaimtxt"+a)[0]&&(document.getElementsByClassName("questclaimtxt"+a)[0].classList.remove("text-danger"),document.getElementsByClassName("questclaimtxt"+a)[0].classList.add("text-success"),document.getElementsByClassName("questclaimtxt"+a)[0].innerText="Claimed");userInfo.quests=
c.quests;loadQuestPanel();var d=document.getElementById("iconquest"+a).getBoundingClientRect();if(1<=performanceMode){if(0<c.ggold){var f=Math.floor(99999*Math.random());document.body.insertAdjacentHTML("beforeend",'<div class="quantoncutfood d'+f+'" style="left: '+d.left+"px; top: "+d.top+'px;"><span class="quantanimated">+ '+c.ggold+'</span><img src="/styles/img/goldicon.png"></div>');d=document.getElementsByClassName("goldicon")[0].getBoundingClientRect();TweenLite.to(".d"+f,2,{onComplete:function(){document.getElementsByClassName("d"+
f)[0].remove()},left:d.left,top:d.top})}clearTimeout(timeranimate);timeranimate=setTimeout(function(){updateUserStats(c,!1)},1500)}else 0<c.ggold&&showItemMoveQuant("","goldicon",c.ggold,!1),updateUserStats(c,!1)}else postResultFalse(c);loadingScreen(!1)})}
function postResultFalse(b){void 0!=b.msg&&makeNotif(1,b.msg);if(9999==b.code)return localStorage.removeItem("mobilevers"),localStorage.removeItem("useraccount"),localStorage.removeItem("userkey"),localStorage.setItem("nftselected",-1),window.location.reload(),!1}var withdrawcounter;
function getWithdrawStatus(b){clearInterval(withdrawcounter);var a=changeTimezone(),c=a.getTime();if(b)return userInfo.withdrawTime<c?"Yes":"Loading...";0<=restNumbers(userInfo.gold,2.5)?document.getElementsByClassName("withdrawnow")[0].classList.contains("disablebtn")&&(document.getElementsByClassName("withdrawnow")[0].classList.remove("disablebtn"),document.getElementById("inputwithdraw").disabled=!1):document.getElementsByClassName("withdrawnow")[0].classList.contains("disablebtn")||(document.getElementsByClassName("withdrawnow")[0].classList.add("disablebtn"),
document.getElementById("inputwithdraw").disabled=!0);userInfo.withdrawTime>c&&!document.getElementsByClassName("withdrawnow")[0].classList.contains("disablebtn")&&(document.getElementsByClassName("withdrawnow")[0].classList.add("disablebtn"),document.getElementById("inputwithdraw").disabled=!0);depositCoord.updated||document.getElementsByClassName("withdrawnow")[0].classList.contains("disablebtn")||(document.getElementsByClassName("withdrawnow")[0].classList.add("disablebtn"),document.getElementById("inputwithdraw").disabled=
!0);withdrawcounter=setInterval(function(){a=changeTimezone();c=a.getTime();if(void 0==document.getElementsByClassName("withdrawnow")[0]||!isVisible(document.getElementsByClassName("withdrawnow")[0]))return clearInterval(withdrawcounter),!1;var d=userInfo.withdrawTime-c,f=Math.floor(d/864E5),e=Math.floor(d%864E5/36E5),g=Math.floor(d%36E5/6E4),h=Math.floor(d%6E4/1E3),k="Yes";0<d?(void 0==document.getElementsByClassName("withdrawnow")[0]||document.getElementsByClassName("withdrawnow")[0].classList.contains("disablebtn")||
(document.getElementsByClassName("withdrawnow")[0].classList.add("disablebtn"),document.getElementById("inputwithdraw").disabled=!0),k=f+"d "+e+"h "+g+"m "+h+" s"):(0<=restNumbers(userInfo.gold,2.5)&&document.getElementsByClassName("withdrawnow")[0].classList.contains("disablebtn")&&(document.getElementsByClassName("withdrawnow")[0].classList.remove("disablebtn"),document.getElementById("inputwithdraw").disabled=!1),clearInterval(withdrawcounter));document.getElementsByClassName("withdrtime")[0].innerHTML=
k},1E3)}
function startTransac(b){var a,c,d,f,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return a=(new ethers.providers.Web3Provider(window.ethereum)).getSigner(),c=new ethers.Contract(USDTContract,BUSDABI,a),d=web3Server.utils.toWei(document.getElementById("inputexchange").value.toString(),"ether"),g.yield(a.getGasPrice(),2);f=g.yieldResult;document.getElementsByClassName("screen-lock-text")[0].innerText="Please check your MetaMask";e={gasPrice:web3Server.utils.hexToNumber(f._hex)};c.transfer(VAULTContract,
d,e).then(function(h){checkHash(h.hash,b);return!1})["catch"](function(h){loadingScreen(!1);b.classList.remove("disablebtn");-32603==h.code?void 0!=h.data?makeNotif(1,h.data.message):makeNotif(1,"Transaction error: Maybe gas too low"):4001==h.code?makeNotif(1,"Transaction canceled"):makeNotif(1,"Transaction error")});g.jumpToEnd()})}
function checkHash(b,a){null!=a&&a.classList.remove("disablebtn");document.getElementsByClassName("screen-lock-text")[0].innerText="Waiting for transaction confirmation";var c=new ethers.providers.Web3Provider(window.ethereum),d=0;clearInterval(checkTransInt);var f=!0,e=0;checkTransInt=setInterval(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(!f)return g["return"](!1);f=!1;c.getTransactionReceipt(b).then(function(h){f=!0;if(null==h){document.getElementsByClassName("screen-lock-text")[0].innerText=
"Checking transaction...";if(10<d)return makeNotif(1,"Transaction error, please check your MetaMask"),clearInterval(checkTransInt),loadingScreen(!1),!1;document.getElementsByClassName("screen-lock-text")[0].innerText="Hash not reflected in the blockchain, checking again: "+(d+1);d+=1}else{if(1!=h.status||1!=h.logs.length||h.logs[0].address.toLowerCase()!=BUSDContract.toLowerCase()&&h.logs[0].address.toLowerCase()!=USDTContract.toLowerCase()||h.to.toLowerCase()!=BUSDContract.toLowerCase()&&h.to.toLowerCase()!=
USDTContract.toLowerCase())return makeNotif(1,"Transaction error, please check your MetaMask"),clearInterval(checkTransInt),loadingScreen(!1),!1;var k="0x"+h.logs[0].topics[1].slice(26).toLowerCase(),l=userInfo.account.toLowerCase();if(k!=l||h.from.toLowerCase()!=userInfo.account.toLowerCase())return makeNotif(1,"The hash does not belong to this account"),clearInterval(checkTransInt),loadingScreen(!1),!1;if("0x"+h.logs[0].topics[2].slice(26).toLowerCase()!=VAULTContract.toLowerCase())return makeNotif(1,
"The transaction does not send the money to MediTown Vault"),clearInterval(checkTransInt),loadingScreen(!1),!1;if(10<=e){clearInterval(checkTransInt);h=(new web3Server.utils.BN(h.logs[0].data)).toString();h=parseInt(web3Server.utils.fromWei(h,"ether"));if(2>h)return makeNotif(1,"This transaction was not made from the MediTown exchange panel"),clearInterval(checkTransInt),loadingScreen(!1),!1;document.getElementsByClassName("screen-lock-text")[0].innerText="Checking transaction...";postData(apiLink+
"/checktransac","POST",{hash:b}).then(function(n){1==n.result?(isVisible(document.getElementsByClassName("draghead7")[0])&&(document.getElementById("inputexchange").value=2,getBalanceBUSD("busdbalance","inputexchange","exchangenow")),exchTrans=n.transactions,renderExchContent(!1),updateUserStats(n,!1),makeNotif(0,n.msg)):postResultFalse(n);loadingScreen(!1)});return!1}document.getElementsByClassName("screen-lock-text")[0].innerText="Confirmations "+e+"/10";e+=1}});g.jumpToEnd()})},1E3)}
function renderRefContent(b){var a="",c=1;Object.entries(referredP).forEach(function(d){d=$jscomp.makeIterator(d);d.next();d=d.next().value;var f=d.wallet.replace(d.wallet.substring(6,36),"****");a+='<tr><th scope="row">'+c+'</th> <td><a href="'+blockeExplorerUrl+"/address/"+d.wallet+'" target="_blank">'+f+"</a></td> <td>"+d.gold+"</td></tr>";c+=1});if(b)return a;""==a&&(a='<tr><td colspan="3"><center>You haven\'t invited anyone yet</center></td></tr>');isVisible(document.getElementsByClassName("draghead6")[0])&&
(document.getElementsByClassName("reftablecontent")[0].innerHTML=a)}
function renderExchContent(b){var a="",c=Object.keys(exchTrans).length,d=c,f=Object.entries(exchTrans).sort(function(e,g){return g[1].date-e[1].date});Object.entries(f).forEach(function(e){e=$jscomp.makeIterator(e);e.next();var g=e.next().value;e=g[0];g=g[1];var h=e,k="Withdraw",l=g.fee;0==g.type&&(k="Deposit");l+=" USDT";var n=c;c==d&&(n="Last");var A="<span>"+h+"</span>";"Processing..."!=h&&(h=e.replace(e.substring(6,60),"****"),A='<a href="'+blockeExplorerUrl+"/tx/"+e+'" target="_blank">'+h+"</a>");
a+='<tr><th scope="row">'+n+"</th> <td>"+A+"</td> <td>"+g.q+"</td><td>"+l+"</td><td>"+k+"</td></tr>";--c});if(b)return a;""==a&&(a='<tr><td colspan="5"><center>You don\'t have any transactions yet</center></td></tr>');isVisible(document.getElementsByClassName("draghead7")[0])&&(document.getElementsByClassName("exchtablecontent")[0].innerHTML=a)}
function windowResize(){window.addEventListener("resize",function(){void 0!=Draggable.get("#gamemap")&&Draggable.get("#gamemap").applyBounds(window);dragdivs.forEach(function(b){void 0!=Draggable.get(".drag"+b)&&Draggable.get(".drag"+b).applyBounds(window)});void 0!=Draggable.get(".chatcontainer")&&Draggable.get(".chatcontainer").applyBounds(window);window.lockedscreen&&(document.getElementsByClassName("screen-lock")[0].style.width=window.innerWidth+"px",document.getElementsByClassName("screen-lock")[0].style.height=
window.innerHeight+"px")},!0);void 0!=localStorage.getItem(userInfo.account+"mapX")&&void 0!=localStorage.getItem(userInfo.account+"mapY")?2<=performanceMode?TweenLite.to("#gamemap",{onComplete:function(){TweenLite.to(".bottombar",{duration:1,right:"0px",ease:Circ.easeOut});buildingFunctions()},duration:.5,x:localStorage.getItem(userInfo.account+"mapX"),y:localStorage.getItem(userInfo.account+"mapY"),ease:Circ.easeOut}):TweenLite.set("#gamemap",{onComplete:function(){document.getElementsByClassName("bottombar")[0].style.right=
"0px";buildingFunctions()},x:localStorage.getItem(userInfo.account+"mapX"),y:localStorage.getItem(userInfo.account+"mapY")}):2<=performanceMode?TweenLite.to("#gamemap",{onComplete:function(){TweenLite.to(".bottombar",{duration:.5,right:"0px",ease:Circ.easeOut});buildingFunctions()},duration:.05,x:"-1px",y:"-1px",ease:Circ.easeOut}):TweenLite.set("#gamemap",{onComplete:function(){document.getElementsByClassName("bottombar")[0].style.right="0px";buildingFunctions()},x:"-1px",y:"-1px"})}
function forceCloseContainerHouse(b){isVisible(document.getElementsByClassName("draghead2")[0])&&hide(document.getElementsByClassName("draghead2")[0]);void 0!=Draggable.get(".mapdraggable")&&Draggable.get(".mapdraggable").kill();stopCellsEditor(0,b);document.querySelectorAll(".mapdraggable").forEach(function(a){void 0!=Draggable.get(a)&&Draggable.get(a).kill()});Object.entries(housesOnMap).forEach(function(a){a=$jscomp.makeIterator(a);a.next();a=a.next().value;void 0!=document.querySelectorAll('[data-objid="'+
a+'"]')[0]&&document.querySelectorAll('[data-objid="'+a+'"]')[0].remove()});housesOnMap=[]}function closeForcePanelHouse(){isVisible(document.getElementsByClassName("draghead3")[0])&&hide(document.getElementsByClassName("draghead3")[0]);clearInterval(houseintervalcheck);document.getElementsByClassName("housetopcontainername")[0].innerHTML="";document.getElementsByClassName("housetopcontainer")[0].innerHTML=""}
function getTextObject(b){var a="",c="";switch(b){case 9:case 10:case 11:case 12:c="Trim";a=c+" bush for "+getPriceObj(b)+" Coins";break;case 13:case 14:case 22:case 23:c="Cut";a=c+" down tree for "+getPriceObj(b)+" Coins";break;case 3:case 2:c="Cut";a=c+" plants for "+getPriceObj(b)+" Coins";break;case 5:c="Cut",a=c+" plant for "+getPriceObj(b)+" Coins"}return c+";"+a+"<span class='goldiconmin'></span>"}function getPriceObj(b){return tileNames[b].price}
function checkBuilds(b){b&&(housesOnMap=[],tempHouses=JSON.parse(JSON.stringify(houses)));var a="",c=[],d=[],f=[];Object.entries(buildings).forEach(function(e){var g=$jscomp.makeIterator(e);e=g.next().value;g=g.next().value;if(depositCoord.updated&&100==e)return!1;var h="",k=0;void 0!=tempHouses[e]&&0<tempHouses[e].q&&(k=tempHouses[e].q,h="itemdrag");var l="",n=Math.floor(99999*Math.random());0<g.price&&(c.push("gold"+n),l+='<img data-cost="'+g.price+'" class="miniiconhouse gold'+n+'" src="/styles/img/goldicon.png">');
0<g.pricewood&&(d.push("wood"+n),l+='<img data-cost="'+g.pricewood+'" class="miniiconhouse wood'+n+'" src="/styles/img/woodicon.png">');0<g.pricecoal&&(f.push("coal"+n),l+='<img data-cost="'+g.pricecoal+'" class="miniiconhouse coal'+n+'" src="/styles/img/coalicon.png">');n="<div onclick=\"showStore('"+e+'\')" class="minibtn"><div class="innermini">Info</div></div>';100==e&&(n='<div class="minibtn disablebtn"><div class="innermini">Info</div></div>');a+='<div class="col-sm-6 nopdborders">\n\t\t\t<div class="card newcard">\n\t\t\t\t<div class="container">\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="col itemsminishop">\n\t\t\t\t\t\tCost: '+
l+'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="card-body cardbodynew">\n\t\t\t\t\t<p class="card-text"><img style="z-index:1000" id="'+e+'" class="itemwidth '+h+'" src="/styles/img/'+g.img+'"></p>\n\t\t\t\t</div>\n\t\t\t\t<h5 class="card-title">'+g.name+" ["+k+']</h5>\n\t\t\t\t<div class="container">\n\t\t\t\t\t<div class="row d-flex justify-content-center">\n\t\t\t\t\t\t'+n+"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>"});document.getElementsByClassName("newrow")[0].innerHTML=
a;c.forEach(function(e){tippy("."+e,{content:document.getElementsByClassName(e)[0].dataset.cost})});f.forEach(function(e){tippy("."+e,{content:document.getElementsByClassName(e)[0].dataset.cost})});d.forEach(function(e){tippy("."+e,{content:document.getElementsByClassName(e)[0].dataset.cost})});startBuildDrag()}
function showStore(b){if(void 0!=document.querySelectorAll('[data-shophouse="'+b+'"]')[0]||100==b)return!1;var a=buildings[b].name,c='<div data-buynowh="'+b+'" onclick="buyNowHouse('+b+')" class="smallbtn"><div class="innersmall">Buy</div></div>',d="",f=!0;void 0!=buildings[b].dailycoins&&0<buildings[b].dailycoins&&(d+="+"+buildings[b].dailycoins+' Coins <img class="miniiconhouse" src="/styles/img/goldicon.png">/day</br>',d+="+"+parseFloat(30*buildings[b].dailycoins).toFixed(2)+' Coins <img class="miniiconhouse" src="/styles/img/goldicon.png">/month');
void 0!=buildings[b].dailyfood&&0<buildings[b].dailyfood&&(""!=d&&(d="</br>"),d+="+"+buildings[b].dailyfood+' Food <img class="miniiconhouse" src="/styles/img/foodicon.png">/day</br>',d+="+"+parseInt(30*buildings[b].dailyfood)+' Food <img class="miniiconhouse" src="/styles/img/foodicon.png">/month');105==b&&(""!=d&&(d="</br>"),d+="Converts "+foodfurnace+' Food <img class="miniiconhouse" src="/styles/img/foodicon.png"> into 1 Coal <img class="miniiconhouse" src="/styles/img/coalicon.png">');var e=
"</br>Cost:</br>",g=!1;0<buildings[b].price&&(userInfo.gold<buildings[b].price&&(f=!1),g=!0,e+="-"+buildings[b].price+' Coins <img class="miniiconhouse goldicondb'+b+'" src="/styles/img/goldicon.png">');0<buildings[b].pricewood&&(userInfo.wood<buildings[b].pricewood&&(f=!1),g&&(e+="</br>"),g=!0,e+="-"+buildings[b].pricewood+' Wood <img class="miniiconhouse woodicondb'+b+'" src="/styles/img/woodicon.png">');0<buildings[b].pricecoal&&(userInfo.coal<buildings[b].pricecoal&&(f=!1),g&&(e+="</br>"),e+=
"-"+buildings[b].pricecoal+' Coal <img class="miniiconhouse coalicondb'+b+'" src="/styles/img/coalicon.png">');f||(c='<div class="smallbtn disablebtn"><div class="innersmall">Buy</div></div>');createDivs('<div data-shophouse="'+b+'" class="container"><div class="row nopd"><div class="col nopd center">'+a+':</div></div></div></div><div class="containedmiddiv flexshop"><img class="itemwidth" src="/styles/img/'+buildings[b].img+'"/><div class="texthouse shoptext">Production:</br>'+d+"</br>"+e+"</div>",
"createddiv newwidthdiv",c)}
function buyNowHouse(b){if(void 0!=document.querySelectorAll('[data-buynowh="'+b+'"]')[0]){if(document.querySelectorAll('[data-buynowh="'+b+'"]')[0].classList.contains("disablebtn"))return!1}else return!1;loadingScreen(!0);postData(apiLink+"/buyhouse/"+b,"POST",{}).then(function(a){if(1==a.result){houses=a.houses;for(var c={},d=0;2>=d;c={$jscomp$loop$prop$connr$33:c.$jscomp$loop$prop$connr$33},d++){var f=0,e="",g="";switch(d){case 0:e="goldicon";f=a.restgold;g=document.getElementsByClassName(e)[0].getBoundingClientRect();break;
case 1:e="woodicon";f=a.restwood;g=document.getElementsByClassName(e)[0].getBoundingClientRect();break;case 2:e="coalicon",f=a.restcoal,g=document.getElementsByClassName(e)[0].getBoundingClientRect()}void 0==f&&(f=0);1<=performanceMode?0<f&&(c.$jscomp$loop$prop$connr$33=Math.floor(99999*Math.random()),document.body.insertAdjacentHTML("beforeend",'<div class="quantoncutfood d'+c.$jscomp$loop$prop$connr$33+'" style="left: '+g.left+"px; top: "+g.top+'px;"><span class="quantanimated">- '+f+'</span><img src="/styles/img/'+
e+'.png"></div>'),e=document.getElementsByClassName(e+"db"+b)[0].getBoundingClientRect(),TweenLite.to(".d"+c.$jscomp$loop$prop$connr$33,2,{onComplete:function(h){return function(){document.getElementsByClassName("d"+h.$jscomp$loop$prop$connr$33)[0].remove()}}(c),left:e.left,top:e.top})):0<f&&showItemMoveQuant("",e,-f,!1);clearTimeout(timeranimate);timeranimate=setTimeout(function(){updateUserStats(a,!1)},500)}checkBuilds(!0)}else void 0!=document.querySelectorAll('[data-buynowh="'+b+'"]')[0]&&(document.querySelectorAll('[data-buynowh="'+
b+'"]')[0].classList.contains("disablebtn")||document.querySelectorAll('[data-buynowh="'+b+'"]')[0].classList.add("disablebtn")),postResultFalse(a);loadingScreen(!1)})}
function startBuildDrag(){void 0!=Draggable.get(".itemdrag")&&Draggable.get(".itemdrag").kill();Draggable.create(".itemdrag",{type:"x,y",bounds:"#gamemap",zIndexBoost:!1,minimumMovement:10,onPress:function(b){b.stopImmediatePropagation();b.stopPropagation();b.preventDefault();var a=this.target.cloneNode(!0);this.target.parentNode.append(a);document.body.prepend(this.target);this.target.style="position:fixed";zindexWindow+=1;this.target.style.zIndex=zindexWindow;TweenLite.set(this.target,{left:b.clientX-
this.target.naturalWidth/4+"px",top:b.clientY-this.target.naturalHeight/4+"px"})},onRelease:function(b){b.stopImmediatePropagation();b.stopPropagation();b.preventDefault();var a=document.getElementsByClassName("draghead2")[0].getBoundingClientRect(),c=this.target.getBoundingClientRect();if(isCollide({width:a.width,height:a.height,x:a.x,y:a.y},{width:c.width,height:c.height,x:c.x,y:c.y}))return makeNotif(2,"You have to drop the object on the map"),this.target.remove(),this.kill(),startBuildDrag(),
!1;a=this.target.id;var d=this.target.naturalWidth,f=this.target.naturalHeight;var e=getMousePos(b);c=roundToEven(Math.round(e.x-d/2),tileSize);e=roundToEven(Math.round(e.y-f/2),tileSize);var g=document.createElement("div");g.dataset.objid=a+";"+c+";"+e;g.id=a;g.style.top=e+"px";g.style.left=c+"px";g.classList="rrealign";g.classList.add("mapdraggable");g.style.background="url('/styles/img/"+this.target.src.split("/styles/img/")[1]+"')";g.style.zIndex=9;g.style.position="absolute";g.style.width=buildings[a].w+
"px";g.style.height=buildings[a].h+"px";if(checkPosDropped(g,!0,d,f,c,e,b)){if(void 0!=tempHouses[a]){b=tempHouses[a].q;if(0>=b)return console.log("YOU DONT HAVE THIS BUILDING"),!1;0>=b-1?delete tempHouses[a]:tempHouses[a].q=b-1}else return console.log("YOU DONT HAVE THIS BUILDING"),!1;housesOnMap.push(a+";"+c+";"+e);g.innerHTML='<div class="btnplaceh" style="top: '+buildings[a].h+'px;"><span data-house="'+g.dataset.objid+'" class="minibutton">Place</span></div><div class="btncancelh" style="top: '+
buildings[a].h+"px;left: "+(buildings[a].w/2-5)+'px;"><span data-house="cancel" class="minibutton">Cancel</span></div>';document.getElementById("gamemap").append(g);drawCellsHousePut();checkBuilds(!1);checkDraggables()}this.target.remove();this.kill();startBuildDrag()}})}function buildMode(){checkBuilds(!0);checkDraggables()}
function checkDraggables(){Draggable.create(".mapdraggable",{bounds:"#gamemap",autoScroll:!0,overshootTolerance:1,zIndexBoost:!1,onClick:function(b){b.stopImmediatePropagation();b.stopPropagation();b.preventDefault();var a=b.target.parentNode.parentNode;if("cancel"==b.target.dataset.house){draggingObject=!1;var c=a.dataset.objid;b=a.id;void 0!=Draggable.get(a)&&Draggable.get(a).kill();a.remove();c=housesOnMap.indexOf(c);-1!==c&&housesOnMap.splice(c,1);void 0!=tempHouses[b]?tempHouses[b].q+=1:tempHouses[b]=
{q:1};stopCellsEditor(housesOnMap.length,!0);checkBuilds(!1)}else if(void 0!=b.target.dataset.house&&3==b.target.dataset.house.split(";").length){draggingObject=!1;loadingScreen(!0);var d=a.dataset.objid,f=parseInt(d.split(";")[0]),e=parseInt(d.split(";")[1]),g=parseInt(d.split(";")[2]);postData(apiLink+"/place/"+f+"/"+e+"/"+g,"POST",{}).then(function(h){if(1==h.result){cachedPaths={};a.style.background=a.style.background.substr(0,a.style.background.length-7)+'b.webp")';a.classList.remove("mapdraggable");
void 0!=Draggable.get(a)&&Draggable.get(a).kill();for(var k=$jscomp.makeIterator(a.children),l=k.next();!l.done;l=k.next())l.value.remove();appendProgressBar(a,d,h.time);calculateTime(h.time,"pr"+d,-1,!1);k=new allmapObjects(e,g,parseInt(f),parseInt(buildings[f].w),parseInt(buildings[f].h),null,0,!0);objectsArray.push(k);k=housesOnMap.indexOf(d);-1!==k&&housesOnMap.splice(k,1);stopCellsEditor(housesOnMap.length,!0);houses=h.houses;userInfo.quests=h.quests;loadQuestPanel();housesStaticOnMap=h.housesonmap;
tempHouses=JSON.parse(JSON.stringify(houses));100==f&&(userInfo.timeforcut=h.timecut);addBuildOnMatrix(f,e,g,!0)}else postResultFalse(h);loadingScreen(!1)})}},onDragEnd:function(b){draggingObject=!1;if(null==this.target.dataset.objid||!checkPosDropped(this.target,!1,0,0,0,0,b))return TweenLite.to(this.target,.05,{x:SX,y:SY}),!1;b=this.target.dataset.objid.split(";")[0];var a=b+";"+realSX+";"+realSY;if(housesOnMap.includes(a)){a=housesOnMap.indexOf(a);-1!==a&&housesOnMap.splice(a,1);a=parseInt(this.target.offsetLeft+
this.x);var c=parseInt(this.target.offsetTop+this.y);this.target.style.zIndex=9;this.target.dataset.objid=b+";"+a+";"+c;housesOnMap.push(b+";"+a+";"+c)}else return TweenLite.to(this.target,.05,{x:SX,y:SY}),!1},onDragStart:function(){draggingObject=!0},type:"x,y",liveSnap:{x:function(b){return roundToEven(b,tileSize)},y:function(b){return roundToEven(b,tileSize)}},onPress:function(b){b.stopImmediatePropagation();b.stopPropagation();b.preventDefault();if(!this.target.classList.contains("mapdraggable")||
!isVisible(document.getElementsByClassName("draghead2")[0]))return this.kill(),!1;SX=this.x;SY=this.y;realSX=this.target.offsetLeft+SX;realSY=this.target.offsetTop+SY}})}function deleteFromMap(b,a){for(var c=$jscomp.makeIterator(objectsArray),d=c.next();!d.done;d=c.next())if(d=d.value,d.posx==b&&d.posy==a){c=objectsArray.indexOf(d);-1!==c&&objectsArray.splice(c,1);break}}
function redrawMap(){ctx.clearRect(0,0,5100,5100);for(var b=$jscomp.makeIterator(objectsArray),a=b.next();!a.done;a=b.next())a=a.value,1==a.isredraw&&null!=a.image&&a.draw()}
function calculateTime(b,a,c,d){var f=document.getElementsByClassName(a)[0],e=changeTimezone().getTime(),g=b-e,h=Math.floor(g%864E5/36E5)+"h "+Math.floor(g%36E5/6E4)+"m "+Math.floor(g%6E4/1E3)+" s";g/=1E3;e=parseInt(a.substr(2).split(";")[0]);var k=0;k=-1==c?buildings[e].time:c;k=Math.floor(g*f.offsetWidth/k)-3;150<k&&(k=150);f.firstChild.innerText=h;f.lastChild.style.width=k+"px";if(0<g)setTimeout(function(){calculateTime(b,a,c,!1)},1E3);else if(-1==c)document.querySelector('[data-objid="'+a.substr(2)+
'"]').remove(),f=parseInt(a.substr(2).split(";")[1]),g=parseInt(a.substr(2).split(";")[2]),(new housesoncanvas(f,g,buildings[e].image,parseInt(buildings[e].w),parseInt(buildings[e].h))).draw(),100!=e&&2<=performanceMode&&void 0==document.getElementsByClassName("villager")[0]&&createVillager(firstTimeLoading),setBuildFunctions(a.substr(2)),NightLoop(),d||makeNotif(0,"Construction complete");else{e=f.getAttribute("class").slice(2);g=e.split(";");h=parseInt(g[0]);h=parseInt(g[1])-parseInt(tileNames[h].w/
2)+32;k=parseInt(g[2])-27;f.parentNode.remove();f=document.getElementById("gamemap");var l='<img src="/styles/img/excl.webp" class="collnow exclsign"/>';1>performanceMode&&(l="");f.insertAdjacentHTML("beforeend","<div onclick=\"collectMap(this,'"+e+"','"+parseInt(g[1])+"-"+parseInt(g[2])+'\')" class="collectaction '+(h+"c"+k)+'" style="left: '+h+"px; top: "+k+'px;"><img src="/styles/img/collectall.webp" class="collnow"/>'+l+"</div>");d||makeNotif(0,"Resource available to collect")}}
function collectMap(b,a,c){clickSound.play();loadingScreen(!0);a=a.split(";");postData(apiLink+"/claim/"+c,"POST",{}).then(function(d){if(1==d.result){var f=b.getBoundingClientRect();f.x+=30;var e=c.split("-");deleteFromMap(parseInt(e[0]),parseInt(e[1]));b.remove();redrawMap();0<d.gfood&&0<d.gwood?makeNotif(0,"Claimed +"+d.gwood+' <img src="/styles/img/woodicon.png"> and +'+d.gfood+' <img src="/styles/img/foodicon.png">'):0<d.gfood?makeNotif(0,"Claimed +"+d.gfood+' <img src="/styles/img/foodicon.png">'):
0<d.gwood&&makeNotif(0,"Claimed +"+d.gwood+' <img src="/styles/img/woodicon.png">');if(1<=performanceMode){if(0<d.gfood){var g=Math.floor(99999*Math.random());document.body.insertAdjacentHTML("beforeend",'<div class="quantoncutfood d'+g+'" style="left: '+f.x+"px; top: "+f.y+'px;"><span class="quantanimated">+ '+d.gfood+'</span><img src="/styles/img/foodicon.png"></div>');var h=document.getElementsByClassName("foodicon")[0].getBoundingClientRect();TweenLite.to(".d"+g,2,{onComplete:function(){document.getElementsByClassName("d"+
g)[0].remove()},left:h.left,top:h.top})}setTimeout(function(){if(0<d.gwood){var k=Math.floor(99999*Math.random());document.body.insertAdjacentHTML("beforeend",'<div class="quantoncutfood d'+k+'" style="left: '+f.x+"px; top: "+f.y+'px;"><span class="quantanimated">+ '+d.gwood+'</span><img src="/styles/img/woodicon.png"></div>');var l=document.getElementsByClassName("woodicon")[0].getBoundingClientRect();TweenLite.to(".d"+k,2,{onComplete:function(){document.getElementsByClassName("d"+k)[0].remove()},
left:l.left,top:l.top})}},100)}else 0<d.gfood&&showItemMoveQuant("","foodicon",d.gfood,!1),0<d.gwood&&showItemMoveQuant("","woodicon",d.gwood,!1);clearTimeout(timeranimate);timeranimate=setTimeout(function(){updateUserStats(d,!1)},1500);changeItemsOnMatrix(parseInt(d.idobj),parseInt(e[0]),parseInt(e[1]),0)}else postResultFalse(d);loadingScreen(!1)})}function creaLuz(b,a){(new houselights(b,a,lightImage.light.img,lightImage.light.width,lightImage.light.height)).draw()}
function setBuildingLight(b,a,c){switch(b){case 100:creaLuz(a+29,c-8);creaLuz(a+142,c-8);break;case 101:creaLuz(a+84,c+38);break;case 102:creaLuz(a+38,c+100);creaLuz(a+132,c+100);creaLuz(a+85,c+48);break;case 103:creaLuz(a+56,c+105);creaLuz(a+116,c+105);break;case 106:creaLuz(a+38,c+100);creaLuz(a+132,c+100);creaLuz(a+86,c+20);creaLuz(a+26,c+47);creaLuz(a+145,c+47);break;case 105:creaLuz(a+180,c+105)}}
function setBuildFunctions(b){var a=parseInt(b.split(";")[1]),c=parseInt(b.split(";")[2]),d=parseInt(b.split(";")[0]);switch(d){case 100:if(!depositCoord.updated){depositCoord.posx=a;depositCoord.posy=c;depositCoord.ident=b;depositCoord.updated=!0;document.getElementsByClassName("roadbutton")[0].classList.remove("disablebtn");Object.freeze(depositCoord);redrawCutButtons(null,!0);apichat=testNet?"ws://127.0.0.1:3001/chat":"wss://api.meditown.io/chat";enableChat&&chatConnect();1<=performanceMode&&(elemGM=
document.getElementById("gamemap"),elemGM.insertAdjacentHTML("beforeend","<img class='wrehquants woodquantwrh' style='top:"+(c+135)+"px;left:"+(a+30)+"px;' src='/styles/img/woodquant.png'/>"),elemGM.insertAdjacentHTML("beforeend","<img class='wrehquants foodquantwrh' style='top:"+(c+90)+"px;left:"+(a+150)+"px;' src='/styles/img/foodquant.png'/>"),elemGM.insertAdjacentHTML("beforeend","<img class='wrehquants basketquantwrh' style='top:"+(c+140)+"px;left:"+(a+100)+"px;' src='/styles/img/basketquant.png'/>"),
elemGM.insertAdjacentHTML("beforeend","<img class='wrehquants coinsquantwrh' style='top:"+(c+90)+"px;left:"+(a+30)+"px;' src='/styles/img/coinsquant.png'/>"));getWareHouseContent();if(2<=performanceMode){b=1;b=void 0==housesStaticOnMap[a+";"+c]?1:parseInt(housesStaticOnMap[a+";"+c].villagers);for(var f=changeTimezone(),e=Object.entries(housesStaticOnMap).filter(function(h){h=$jscomp.makeIterator(h);h.next();h=h.next().value;return 100!==h.id&&105!==h.id&&h.time<f.getTime()}),g=0;g<b;g++)0<Object.entries(e).length&&
createVillager(firstTimeLoading)}0<parseFloat(localStorage.getItem("globalmusic"))&&setTimeout(function(){backgroundSound.play()},500)}break;case 102:1<=performanceMode&&(elemGM=document.getElementById("gamemap"),elemGM.insertAdjacentHTML("beforeend","<span class='smoke' style='top:"+(c-95)+"px;left:"+(a+22)+"px;'></span>"));break;case 106:1<=performanceMode&&(elemGM=document.getElementById("gamemap"),elemGM.insertAdjacentHTML("beforeend","<span class='smoke' style='top:"+(c-105)+"px;left:"+(a+95)+
"px;'></span>"),elemGM.insertAdjacentHTML("beforeend","<span class='smoke' style='top:"+(c-105)+"px;left:"+(a-52)+"px;'></span>"));break;case 103:1<=performanceMode&&(elemGM=document.getElementById("gamemap"),elemGM.insertAdjacentHTML("beforeend","<span class='smoke' style='top:"+(c-108)+"px;left:"+(a+22)+"px;'></span>"));break;case 104:1<=performanceMode&&(elemGM=document.getElementById("gamemap"),elemGM.insertAdjacentHTML("beforeend","<span class='grinder' style='top:"+(c-40)+"px;left:"+(a-26)+
"px;'></span>"))}convertedNight&&setBuildingLight(d,a,c);a=new allmapButtons(a+buildings[d].w/2-100,c+buildings[d].h-80,19,45,45,d+"-"+a+"-"+c);depositCoord.updated&&a.draw();buttonsArray.push(a)}function QueuePerformance(){this.queue={key1:null,key2:null,key3:null,key4:null,key5:null}}QueuePerformance.prototype.enqueue=function(b){var a=this.getEmptyKey();if(a)return this.queue[a]=b,a;a=Object.keys(this.queue);a="key"+(parseInt(a[a.length-1].substring(3))+1);this.queue[a]=b;return a};
QueuePerformance.prototype.dequeue=function(b){for(var a in this.queue)if(this.queue[a]===b)return this.queue[a]=null,a;return null};QueuePerformance.prototype.getEmptyKey=function(){for(var b in this.queue)if(!this.queue[b])return b;return null};var queuePerformance=new QueuePerformance,queuePerformance2=new QueuePerformance,queuePerformance3=new QueuePerformance;
function showItemMoveQuant(b,a,c,d){if(d){b=document.getElementsByClassName(b)[0].getBoundingClientRect();d=document.getElementsByClassName(a)[0].getBoundingClientRect();var f=Math.floor(99999*Math.random());document.body.insertAdjacentHTML("beforeend",'<div class="quantoncutfood d'+f+'" style="left: '+b.left+"px; top: "+b.top+'px;"><span class="quantanimated">+ '+c+'</span><img src="/styles/img/'+a+'.png"></div>');TweenLite.to(".d"+f,1.5,{onComplete:function(){document.getElementsByClassName("d"+
f)[0].remove()},left:d.left,top:d.top})}else{var e=Math.floor(99999*Math.random());b=document.getElementsByClassName(a)[0].getBoundingClientRect();d=-1;d="foodicon"==a?queuePerformance.enqueue(e):"coalicon"==a?queuePerformance2.enqueue(e):queuePerformance3.enqueue(e);if(-1==d)return!1;d=parseInt(d.substring(3));document.body.insertAdjacentHTML("beforeend",'<div class="quantoncutfood d'+e+'" style="left: '+b.left+"px; top: "+(b.top+32*d)+'px;"><span class="quantanimated">+ '+c+'</span><img src="/styles/img/'+
a+'.png"></div>');setTimeout(function(){"foodicon"==a?queuePerformance.dequeue(e):"coalicon"==a?queuePerformance2.dequeue(e):queuePerformance3.dequeue(e);document.getElementsByClassName("d"+e)[0].remove()},1300)}}
function openHouseSettings(b){lastimgvaluetype="";arraytimers=[];clearInterval(houseintervalcheck);var a=parseInt(b.split("-")[0]);if(void 0==buildings[a])return alert("Unknow house id"),window.location.reload(),!1;var c=parseInt(b.split("-")[1]),d=parseInt(b.split("-")[2]),f=a+"-"+c+"-"+d;document.getElementsByClassName("housetopcontainername")[0].innerHTML=buildings[a].name+"<span class='nftid'>#"+housesStaticOnMap[c+";"+d].nftid+"</span>";b='<img src="/styles/img/'+buildings[a].img+'" class="housimg"></img>';
var e="disablebtn";if(100!=a)if(105==a){var g="disablebtn",h="",k=changeTimezone(),l='<span class="text-warning">Stopped</span>',n="",A=!1,p='Remaining Time: <span class="remaintimefur">0s</span>';1==housesStaticOnMap[c+";"+d].villagers?housesStaticOnMap[c+";"+d].nextclaim>k.getTime()?(l='<span class="text-success">Started</span>',A=!0,p='Remaining Time: <span class="remaintimefur">0s</span>',n='<div class="smallbtn disablebtn claimFurns tempclaimaction"><div class="innersmall">Claim</div></div>'):
(l='<span class="text-success">Finished</span>',p="Ready to claim",n='<div class="smallbtn  claimFurns"><div class="innersmall">Claim</div></div>'):(userInfo.food>=foodfurnace-housesStaticOnMap[depositCoord.posx+";"+depositCoord.posy].villagers?(g="",h="convertFur satfilter1",p="Ready to convert"):p="Not enought food",n='<div class="smallbtn '+g+" "+h+'"><div class="innersmall">Convert</div></div>');document.getElementsByClassName("housetopcontainer")[0].innerHTML="<center>"+b+"</center>";document.getElementsByClassName("housemidcontainer")[0].innerHTML=
'<div class="texthouse">Status: '+l+"</br>Total converted: ["+housesStaticOnMap[c+";"+d].totalclaim+' <img class="miniiconhouse2" src="/styles/img/coalicon.png"/>]</br>Waiting time <span class="text-primary">'+(10-housesStaticOnMap[depositCoord.posx+";"+depositCoord.posy].villagers)+'h</span></br>Convert: [<span class="text-primary">'+(foodfurnace-housesStaticOnMap[depositCoord.posx+";"+depositCoord.posy].villagers)+'</span> <img class="miniiconhouse2" src="/styles/img/foodicon.png"/>] into [1 <img class="miniiconhouse2 panelcoalicon" src="/styles/img/coalicon.png"/>]</div><div class="housevault">'+
p+'</div><center><div class="progress"><div class="progress-bar barhouseload" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%;"></div></div></center><div class="buttonlists">'+n+"</div>";A&&(countDownHouseTime(c+";"+d,"",a),houseintervalcheck=setInterval(function(){countDownHouseTime(c+";"+d,"",a)},1E3));0==housesStaticOnMap[c+";"+d].villagers?userInfo.food>=foodfurnace-housesStaticOnMap[depositCoord.posx+";"+depositCoord.posy].villagers&&document.getElementsByClassName("convertFur")[0].addEventListener("click",
function(q){q.stopImmediatePropagation();q.stopPropagation();q.preventDefault();if(this.classList.contains("disablebtn"))return!1;loadingScreen(!0);postData(apiLink+"/convertfurnace/"+f,"POST",{}).then(function(m){m.result?(housesStaticOnMap=m.housesonmap,updateUserStats(m,!1),openHouseSettings(f),checkDynamicEffects()):postResultFalse(m);loadingScreen(!1)})}):housesStaticOnMap[c+";"+d].nextclaim<=k.getTime()&&document.getElementsByClassName("claimFurns")[0].addEventListener("click",function(q){q.stopImmediatePropagation();
q.stopPropagation();q.preventDefault();if(this.classList.contains("disablebtn"))return!1;loadingScreen(!0);postData(apiLink+"/claimfurnace/"+f,"POST",{}).then(function(m){1==m.result?(housesStaticOnMap=m.housesonmap,1<=performanceMode?setTimeout(function(){showItemMoveQuant("panelcoalicon","coalicon",1,!0)},100):showItemMoveQuant("","coalicon",1,!1),void 0!=document.getElementsByClassName("smk"+c+";"+d)[0]&&document.getElementsByClassName("smk"+c+";"+d)[0].remove(),updateUserStats(m,!1),openHouseSettings(f)):
postResultFalse(m);loadingScreen(!1)})})}else g=calculateHousePrice(a),h=parseFloat(housesStaticOnMap[c+";"+d].totalclaim),h=parseFloat(100*h/(g*housesStaticOnMap[c+";"+d].villagers)).toFixed(2),k=100,g="<span class='text-success'>Perfect</span>",100<=h&&200>=h?(k=60,g="<span class='text-danger'>Poor Quality</span>"):200<h&&(k=30,g="<span class='text-danger'>Degraded</span>"),g="Status: "+g+"</br>Villagers: "+(housesStaticOnMap[c+";"+d].villagers+"/5</br>"),g+="Claim: "+k+"%</br>",k=!1,void 0!=buildings[a].dailyfood?
(k=!0,l=calculateRewardFood(100,a,100,c+";"+d),g+="Daily Production: "+l+" [<span class='text-primary'>+"+parseInt(housesStaticOnMap[depositCoord.posx+";"+depositCoord.posy].villagers-1)*bonusPerLevel+"%</span>] <img class='miniiconhouse2' src='/styles/img/foodicon.png'></img></br>"):void 0!=buildings[a].dailycoins&&(l=calculateRewardCoins(100,a,100,c+";"+d),g+="Daily Production: "+l+" [<span class='text-primary'>+"+parseInt(housesStaticOnMap[depositCoord.posx+";"+depositCoord.posy].villagers-1)*
bonusPerLevel+"%</span>] <img class='miniiconhouse' src='/styles/img/goldicon.png'></img></br>"),g+="Roi: "+h+"%</br>",houseintervalcheck=setInterval(function(){countDownHouseTime(c+";"+d,"",a)},1E3),g+="Full Claim in: <span class='housetimecountdown'>loading...</span></br>",g=k?g+"Min Claim: 1 <img class='miniiconhouse2' src='/styles/img/foodicon.png'></img></br>":g+("Min Claim: "+(minhouseclaim-5*(housesStaticOnMap[c+";"+d].villagers-1))+"%</br>"),h="",5>housesStaticOnMap[c+";"+d].villagers&&(h=
'<div class="smallbtn upgradebtn satfilter1"><div class="innersmall">Upgrade</div></div>'),h='<div class="buttonlists"><div class="smallbtn claimBtn disablebtn"><div class="innersmall">Claim</div></div>'+h+"</div>",document.getElementsByClassName("housemidcontainer")[0].innerHTML='<div class="texthouse">'+g+'</div><div class="housevault">Vault: <span class="vaultpercent">loading...</span> <span class="vaulttype"></span><span class="imgvaulttype"></span></div><center><div class="progress"><div class="progress-bar barhouseload" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div></div></center>'+
h;else{var y=0,w=0;Object.entries(housesStaticOnMap).forEach(function(q){var m=$jscomp.makeIterator(q);q=m.next().value;m=m.next().value;if(100!=m.id&&void 0!=buildings[m.id]){var t=calculateHousePrice(m.id);if(void 0!=buildings[m.id].dailycoins&&0<buildings[m.id].dailycoins){var v=parseFloat(m.totalclaim);v=parseFloat(100*v/(t*m.villagers)).toFixed(2);var B=100;100<=v&&200>=v?B=60:200<v&&(B=30);v=calculateRewardCoins(100,m.id,B,q);y=sumNumbers(y,v)}void 0!=buildings[m.id].dailyfood&&0<buildings[m.id].dailyfood&&
(v=parseInt(m.totalclaim),t=parseFloat(100*v/(t*m.villagers)).toFixed(2),v=100,100<=t&&200>=t?v=60:200<t&&(v=30),q=calculateRewardFood(100,m.id,v,q),w+=q)}});b="";g="WareHouse Level: <span class='text-primary'>"+housesStaticOnMap[c+";"+d].villagers+"</span></br>";g+="Pickup/Build Time: [<span class='text-primary'>distance</span> / <span class='text-primary'>"+userInfo.timeforcut+"</span>]</br>";g+="Custom objects on map: <span class='text-primary'>"+userInfo.maxroads+"</span></br>";g+="Production Bonus: <span class='text-primary'>"+
(housesStaticOnMap[c+";"+d].villagers-1)*bonusPerLevel+"%</span></br>";g+="Total Coins Claimed: "+userInfo.coinsClaim+" <img class='miniiconcoin' src='/styles/img/goldicon.png'></br>";g+="Total Resources Collected: "+userInfo.resClaim+"</br>";g+="Total Buildings: "+Object.entries(housesStaticOnMap).length+"</br>";g=g+("Daily Food: "+w+" <img class='miniiconfood' src='/styles/img/foodicon.png'></br>Monthly Food: ")+(30*w+" <img class='miniiconfood' src='/styles/img/foodicon.png'></br>Daily Coins: ")+
(y+" <img class='miniiconcoin' src='/styles/img/goldicon.png'></br>Monthly Coins: ")+(multNumbers(y,30)+" <img class='miniiconcoin' src='/styles/img/goldicon.png'></br>");k="";h="disablebtn";5>housesStaticOnMap[c+";"+d].villagers&&(userInfo.gold>=buildings[100].upgradeprice?h="":g+="Upgrade cost: <span class='text-primary'>"+buildings[100].upgradeprice+" <img class='miniiconcoin' src='/styles/img/goldicon.png'></span>");k='<div class="smallbtn upgradewrh '+h+' satfilter1"><div class="innersmall">Upgrade</div></div>';
""!=h&&(k='<div class="smallbtn upgradewrh '+h+'"><div class="innersmall">Upgrade</div></div>');k='<div class="buttonlists"><div class="smallbtn allbuildings"><div class="innersmall">Buildings</div></div>'+k+"</div>";document.getElementsByClassName("housemidcontainer")[0].innerHTML='<div class="texthouse">'+g+"</div>"+k;""==h&&document.getElementsByClassName("upgradewrh")[0].addEventListener("click",function t(m){m.stopImmediatePropagation();m.stopPropagation();m.preventDefault();m="WareHouse Level: <span class='text-primary'>"+
housesStaticOnMap[c+";"+d].villagers+"</span></br>";m+="Custom objects on map: <span class='text-primary'>"+userInfo.maxroads+"</span></br>";m+="Production Bonus: <span class='text-primary'>"+(housesStaticOnMap[c+";"+d].villagers-1)*bonusPerLevel+"%</span></br>";m+='<center><i class="bi bi-arrow-down"></i></center>';var v="WareHouse Level: <span class='text-primary'>"+(housesStaticOnMap[c+";"+d].villagers+1)+"</span></br>";v+="Custom objects on map: <span class='text-primary'>"+userInfo.maxroads*
(housesStaticOnMap[c+";"+d].villagers+1)+"</span></br>";v+="Production Bonus: <span class='text-primary'>"+housesStaticOnMap[c+";"+d].villagers*bonusPerLevel+"%</span></br>";v+="</br>Upgrade cost: <span class='text-primary'>"+buildings[100].upgradeprice+" <img class='miniiconcoin' src='/styles/img/goldicon.png'></span></br>";userInfo.gold>=buildings[100].upgradeprice&&(e="");document.getElementsByClassName("housemidcontainer")[0].innerHTML='<div class="texthouse">'+m+v+'</div><div class="buttonlists"><div class="smallbtn gobackwrh"><div class="innersmall">Go Back</div></div><div class="smallbtn upgradenow satfilter1"><div class="innersmall '+
e+'">Upgrade</div></div>';5>housesStaticOnMap[c+";"+d].villagers&&(userInfo.gold>=buildings[100].upgradeprice&&(e=""),""==e?document.getElementsByClassName("upgradenow")[0].addEventListener("click",upgradehousepost):document.getElementsByClassName("upgradenow")[0].removeEventListener("click",upgradehousepost));document.getElementsByClassName("gobackwrh")[0].addEventListener("click",function u(x){x.stopImmediatePropagation();x.stopPropagation();x.preventDefault();openHouseSettings(f);this.removeEventListener("click",
u)});this.removeEventListener("click",t)});document.getElementsByClassName("allbuildings")[0].addEventListener("click",function v(t){t.stopImmediatePropagation();t.stopPropagation();t.preventDefault();var B="";Object.entries(housesStaticOnMap).forEach(function(x){x=$jscomp.makeIterator(x);var u=x.next().value,r=x.next().value;if(void 0==r.id)return!1;x=r.id;var D=parseInt(u.split(";")[0]);u=parseInt(u.split(";")[1]);var C=Math.floor(999999*Math.random());if(void 0!=buildings[x].dailycoins||void 0!=
buildings[x].dailyfood){var z=calculateHousePrice(x),E=parseFloat(r.totalclaim);r=parseFloat(100*E/(z*r.villagers)).toFixed(2);z="green";100<=r&&200>=r?z="yellow":200<r&&(z="red");arraytimers.push(C+";"+D+";"+u+";"+x);B+='<div class="row align-items-start"><div class="col-2"><img onclick="openHouseSettings(`'+(x+"-"+D+"-"+u)+'`);"class="miniimgfix" src="/styles/img/'+buildings[x].img+'"/></div><div class="col-7 pdt5"><div class="housevault2 newftsz">Roi: <span class="roipos '+z+'">'+r+'%</span><div class="roiinsideb"> [<span class="vaultpercent'+
C+'">...</span>]</div></div><div class="progress newprogress"><div class="progress-bar barhouseload barhouseload'+C+'" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div></div><div class="col-3 pdt5 fixcolleft d-flex justify-content-center align-self-center"><div class="btnslist"><div data-house="'+x+"-"+D+"-"+u+"-"+C+'" class="minibtn claimMinib claimBtn'+C+' disablebtn"><div class="innermini">Claim</div></div></div></div></div>'}});t="loading...";
""==B&&(B="<center>There is nothing built yet</center>",t="0 / 0");document.getElementsByClassName("housemidcontainer")[0].innerHTML='<div class="texthouse redesigned"><div class="container containerfix">'+B+'</div></div><div class="texthouse">Available to Claim:</br>- <span class="coinswrhsq">'+t+'</span> <img class="miniiconcoin" src="/styles/img/goldicon.png"><br>- <span class="foodwrhsq">'+t+'</span> <img class="miniiconfood" src="/styles/img/foodicon.png"><br></div><div class="buttonlists"><div class="smallbtn claimAllH disablebtn"><div class="innersmall">Claim All</div></div><div class="smallbtn gowrhs"><div class="innersmall">Go Back</div></div></div>';
document.querySelectorAll(".claimMinib").forEach(function(x){return x.addEventListener("click",function(u){var r=u.target.dataset.house,D=u.target.classList;D.contains("minibtn")||(D=u.target.parentNode.classList);if(D.contains("disablebtn"))return!1;void 0==r&&(r=u.target.parentNode.dataset.house);var C=r.split("-")[3];u=r.split("-")[0]+"-"+r.split("-")[1]+"-"+r.split("-")[2];loadingScreen(!0);postData(apiLink+"/claimhouse/"+u+"/false","POST",{}).then(function(z){1==z.result?(housesStaticOnMap=z.housesonmap,
userInfo.coinsClaim=parseFloat(z.totalclaim).toFixed(2),void 0!=document.getElementsByClassName("claimBtn"+C)[0]&&document.getElementsByClassName("claimBtn"+C)[0].classList.add("disablebtn"),1<=performanceMode?setTimeout(function(){0<z.rewfood&&showItemMoveQuant("claimBtn"+C,"foodicon",z.rewfood,!0);0<z.rewcoins&&showItemMoveQuant("claimBtn"+C,"goldicon",z.rewcoins,!0)},100):(0<z.rewfood&&showItemMoveQuant("","foodicon",z.rewfood,!1),0<z.rewcoins&&showItemMoveQuant("","goldicon",z.rewcoins,!1)),updateUserStats(z,
!1)):postResultFalse(z);loadingScreen(!1)})})});document.getElementsByClassName("claimAllH")[0].addEventListener("click",function(x){var u=this;x.stopImmediatePropagation();x.stopPropagation();x.preventDefault();if(this.classList.contains("disablebtn"))return!1;loadingScreen(!0);postData(apiLink+"/claimhouse/0-0-0/true","POST",{}).then(function(r){1==r.result?(housesStaticOnMap=r.housesonmap,userInfo.coinsClaim=parseFloat(r.totalclaim).toFixed(2),u.classList.add("disablebtn"),1<=performanceMode?setTimeout(function(){0<
r.rewfood&&showItemMoveQuant("claimAllH","foodicon",r.rewfood,!0);0<r.rewcoins&&showItemMoveQuant("claimAllH","goldicon",r.rewcoins,!0)},100):(0<r.rewfood&&showItemMoveQuant("","foodicon",r.rewfood,!1),0<r.rewcoins&&showItemMoveQuant("","goldicon",r.rewcoins,!1)),updateUserStats(r,!1)):postResultFalse(r);loadingScreen(!1)})});document.getElementsByClassName("gowrhs")[0].addEventListener("click",function r(u){u.stopImmediatePropagation();u.stopPropagation();u.preventDefault();openHouseSettings(f);
this.removeEventListener("click",r)});""!=B&&(startArrayTimers(),houseintervalcheck=setInterval(function(){startArrayTimers()},1E3));this.removeEventListener("click",v)})}document.getElementsByClassName("housetopcontainer")[0].innerHTML="<center>"+b+"</center>";isVisible(document.getElementsByClassName("draghead3")[0])||show(document.getElementsByClassName("draghead3")[0]);lasttoppost=f;100!=a&&105!=a&&(countDownHouseTime(c+";"+d,"",a),5>housesStaticOnMap[c+";"+d].villagers&&document.getElementsByClassName("upgradebtn")[0].addEventListener("click",
function(q){q.stopImmediatePropagation();q.stopPropagation();q.preventDefault();clearInterval(houseintervalcheck);q="";var m="</br>Min Claim: -5%";void 0!=buildings[a].dailyfood&&(m="");var t="";void 0!=buildings[a].price?0<buildings[a].price&&(t+=buildings[a].price+' Coins <img class="miniiconhouse panelcoinicn" src="/styles/img/goldicon.png">'):buildings[a].price=0;void 0!=buildings[a].pricewood?0<buildings[a].pricewood&&(""!=t&&(t+="</br>"),t+=buildings[a].pricewood+' Wood <img class="miniiconhouse2 panelcoinicn" src="/styles/img/woodicon.png">'):
buildings[a].pricewood=0;void 0!=buildings[a].pricecoal&&0<buildings[a].pricecoal?(""!=t&&(t+="</br>"),t+=buildings[a].pricecoal+' Coal <img class="miniiconhouse panelcoinicn" src="/styles/img/coalicon.png">'):buildings[a].pricecoal=0;userInfo.gold>=buildings[a].price&&userInfo.wood>=buildings[a].pricewood&&userInfo.coal>=buildings[a].pricecoal&&(e="");var v=parseFloat(housesStaticOnMap[c+";"+d].totalclaim),B=calculateHousePrice(a);v=parseFloat(100*v/(B*(housesStaticOnMap[c+";"+d].villagers+1))).toFixed(2);
q=q+('<div class="texthouse"><span class="txtpanel1 underline">Upgrade Stats:</span>+1 Villager</br>Roi drops to: '+v+"%</br>Production: +1 building"+m+'</br>Time reduction: -1h</br><span class="txtpanel1 underline">Cost:</span>'+t+'</div><div class="buttonlists"><div class="smallbtn gobackhouse"><div class="innersmall">Go Back</div></div><div class="smallbtn upgradenow satfilter1 ')+(e+'"><div class="innersmall '+e+'">Upgrade</div></div></div>');document.getElementsByClassName("housemidcontainer")[0].innerHTML=
q;document.getElementsByClassName("gobackhouse")[0].addEventListener("click",function r(u){u.stopImmediatePropagation();u.stopPropagation();u.preventDefault();openHouseSettings(f);this.removeEventListener("click",r)});""==e?document.getElementsByClassName("upgradenow")[0].addEventListener("click",upgradehousepost):document.getElementsByClassName("upgradenow")[0].removeEventListener("click",upgradehousepost)}),document.getElementsByClassName("claimBtn")[0].addEventListener("click",function(q){q.stopImmediatePropagation();
q.stopPropagation();q.preventDefault();if(this.classList.contains("disablebtn"))return!1;loadingScreen(!0);postData(apiLink+"/claimhouse/"+f+"/false","POST",{}).then(function(m){1==m.result?(housesStaticOnMap=m.housesonmap,userInfo.coinsClaim=parseFloat(m.totalclaim).toFixed(2),1<=performanceMode?setTimeout(function(){0<m.rewfood&&showItemMoveQuant("panelfoodicn","foodicon",m.rewfood,!0);0<m.rewcoins&&showItemMoveQuant("panelcoinicn","goldicon",m.rewcoins,!0)},100):(0<m.rewfood&&showItemMoveQuant("",
"foodicon",m.rewfood,!1),0<m.rewcoins&&showItemMoveQuant("","goldicon",m.rewcoins,!1)),updateUserStats(m,!1),openHouseSettings(f)):postResultFalse(m);loadingScreen(!1)})}))}
function startArrayTimers(){var b=0,a=0,c=0,d=0;arraytimers.forEach(function(f){var e=f.split(";");if(void 0==housesStaticOnMap[e[1]+";"+e[2]])return!1;f=housesStaticOnMap[e[1]+";"+e[2]].id;e=countDownHouseTime(e[1]+";"+e[2],e[0],e[3]);void 0!=buildings[f].dailyfood?(a=sumNumbers(a,e.split(";")[0]),d=sumNumbers(d,e.split(";")[1])):void 0!=buildings[f].dailycoins&&(b=sumNumbers(b,e.split(";")[0]),c=sumNumbers(c,e.split(";")[1]))});void 0!=document.getElementsByClassName("coinswrhsq")[0]&&(document.getElementsByClassName("coinswrhsq")[0].innerText=
b+" / "+c);void 0!=document.getElementsByClassName("foodwrhsq")[0]&&(document.getElementsByClassName("foodwrhsq")[0].innerText=parseInt(a)+" / "+parseInt(d))}
function upgradehousepost(b){var a=this;b.stopImmediatePropagation();b.stopPropagation();b.preventDefault();loadingScreen(!0);postData(apiLink+"/upgradehouse/"+lasttoppost,"POST",{}).then(function(c){if(1==c.result){var d=parseInt(lasttoppost.split("-")[0]),f=parseInt(lasttoppost.split("-")[1]),e=parseInt(lasttoppost.split("-")[2]);housesStaticOnMap=c.housesonmap;f=f-buildings[d].w/2+37;e-=buildings[d].h/2;var g=Math.floor(99999*Math.random());document.getElementById("gamemap").insertAdjacentHTML("beforeend",
'<img class="firews firw'+g+'" style="left:'+f+"px;top:"+e+'px" src="/styles/img/fireworks.webp?v='+g+'"/>');setTimeout(function(){document.getElementsByClassName("firw"+g)[0].remove()},4500);updateUserStats(c,!1);100==d&&(userInfo.maxroads=parseInt(c.roadquant),userInfo.timeforcut=c.timecut,createVillager(firstTimeLoading));openHouseSettings(lasttoppost);a.removeEventListener("click",upgradehousepost);makeNotif(0,c.msg)}else postResultFalse(c);loadingScreen(!1)})}
function getBalanceBUSD(b,a,c){var d,f,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return d=new web3Server.eth.Contract(BUSDABI,USDTContract),g.yield(d.methods.balanceOf(userInfo.account).call(),2);f=g.yieldResult;e=parseFloat(parseFloat(web3Server.utils.fromWei(f,"ether")).toFixed(2));document.getElementsByClassName(b)[0].innerText=e;void 0!=a&&(2>e?(document.getElementById("inputexchange").value=2,document.getElementById("inputexchange").disabled=!0,document.getElementById(a).setAttribute("max",
2),void 0!=c&&(document.getElementsByClassName(c)[0].classList.contains("disablebtn")||document.getElementsByClassName(c)[0].classList.add("disablebtn"))):(void 0!=c&&document.getElementsByClassName(c)[0].classList.contains("disablebtn")&&document.getElementsByClassName(c)[0].classList.remove("disablebtn"),document.getElementById("inputexchange").disabled=!1,document.getElementById(a).setAttribute("max",e)));g.jumpToEnd()})}
function calculateHousePrice(b){var a=0;void 0!=buildings[b].dailycoins&&0<buildings[b].dailycoins&&(a=buildings[b].price);void 0!=buildings[b].dailyfood&&(a=buildings[b].price/(buildings[b].price/30/buildings[b].dailyfood));0<buildings[b].pricecoal&&(a=buildings[b].totalcost);void 0!=buildings[b].pricewood&&0<buildings[b].pricewood&&(a+=.1*buildings[b].pricewood);return a}
function calculateRewardCoins(b,a,c,d){a=parseFloat(c*buildings[a].dailycoins*housesStaticOnMap[d].villagers/100);b=parseFloat(a*b/100);a=b*(parseInt(housesStaticOnMap[depositCoord.posx+";"+depositCoord.posy].villagers)-1)*bonusPerLevel/100;b=sumNumbers(b,a);0>b&&(b=0);return b}
function calculateRewardFood(b,a,c,d){rewardtoGive=Math.floor(Math.floor(c*buildings[a].dailyfood*housesStaticOnMap[d].villagers/100)*b/100);b=parseInt(rewardtoGive*(parseInt(housesStaticOnMap[depositCoord.posx+";"+depositCoord.posy].villagers)-1)*bonusPerLevel/100);rewardtoGive+=b;1>rewardtoGive&&(rewardtoGive=0);return rewardtoGive=parseInt(rewardtoGive)}
function countDownHouseTime(b,a,c){var d=changeTimezone().getTime(),f=(new Date(housesStaticOnMap[b].nextclaim)).getTime(),e=(86400-3600*(housesStaticOnMap[b].villagers-1))/100;105==c&&(e=3600*housesStaticOnMap[b].inittimer/100);d=f-d;e=parseFloat(100-d/1E3/e).toFixed(2);100<e?e=100:0>e&&(e=0);f=0;var g=0;var h=calculateHousePrice(c);0!=h&&(g=parseFloat(housesStaticOnMap[b].totalclaim),h=parseFloat(100*g/(h*housesStaticOnMap[b].villagers)).toFixed(2),g=100,100<=h&&200>=h?g=60:200<h&&(g=30));h=minhouseclaim;
if(void 0!=buildings[c].dailyfood)f=1,g=calculateRewardFood(e,c,g,b),b="["+g+" Food ",c='<img class="miniiconhouse2 panelfoodicn" src="/styles/img/foodicon.png"></img>]';else if(void 0!=buildings[c].dailycoins)h=minhouseclaim-5*(housesStaticOnMap[b].villagers-1),g=calculateRewardCoins(e,c,g,b),b="["+g+" Coins ",c='<img class="miniiconhouse panelcoinicn" src="/styles/img/goldicon.png"></img>]';else return 105==c?0<d?(d=Math.floor(d%864E5/36E5)+"h "+Math.floor(d%36E5/6E4)+"m "+Math.floor(d%6E4/1E3)+
" s",document.getElementsByClassName("remaintimefur")[0].innerText=d,document.getElementsByClassName("barhouseload"+a)[0].style.width=e+"%"):(document.getElementsByClassName("remaintimefur")[0].innerText="Ready",document.getElementsByClassName("barhouseload"+a)[0].style.width="100%",void 0!=document.getElementsByClassName("tempclaimaction")[0]&&(document.getElementsByClassName("tempclaimaction")[0].classList.remove("disablebtn"),document.getElementsByClassName("tempclaimaction")[0].classList.remove("tempclaimaction")),
""==a&&clearInterval(houseintervalcheck)):""==a&&clearInterval(houseintervalcheck),"0;0";if(""==a&&0<d){var k=Math.floor(d%864E5/36E5)+"h "+Math.floor(d%36E5/6E4)+"m "+Math.floor(d%6E4/1E3)+" s";document.getElementsByClassName("housetimecountdown"+a)[0].innerText=k}""==a&&(document.getElementsByClassName("vaulttype")[0].innerHTML=b,lastimgvaluetype!=c&&(lastimgvaluetype=document.getElementsByClassName("imgvaulttype")[0].innerHTML=c));document.getElementsByClassName("barhouseload"+a)[0].style.width=
e+"%";document.getElementsByClassName("vaultpercent"+a)[0].innerText=e+"%";e>=h&&0==f?(document.getElementsByClassName("claimBtn"+a)[0].classList.contains("disablebtn")&&document.getElementsByClassName("claimBtn"+a)[0].classList.remove("disablebtn"),""!=a&&document.getElementsByClassName("claimAllH")[0].classList.contains("disablebtn")&&document.getElementsByClassName("claimAllH")[0].classList.remove("disablebtn")):e<h&&0==f&&(document.getElementsByClassName("claimBtn"+a)[0].classList.contains("disablebtn")||
document.getElementsByClassName("claimBtn"+a)[0].classList.add("disablebtn"));1<=g&&1==f?(document.getElementsByClassName("claimBtn"+a)[0].classList.contains("disablebtn")&&document.getElementsByClassName("claimBtn"+a)[0].classList.remove("disablebtn"),""!=a&&document.getElementsByClassName("claimAllH")[0].classList.contains("disablebtn")&&document.getElementsByClassName("claimAllH")[0].classList.remove("disablebtn")):1>g&&1==f&&(document.getElementsByClassName("claimBtn"+a)[0].classList.contains("disablebtn")||
document.getElementsByClassName("claimBtn"+a)[0].classList.add("disablebtn"));return 0>=d?(""==a?(document.getElementsByClassName("housetimecountdown"+a)[0].innerText="Ready",clearInterval(houseintervalcheck)):0>=arraytimers.length&&clearInterval(houseintervalcheck),document.getElementsByClassName("vaultpercent"+a)[0].innerText="100%",g+";"+g):""==a||document.getElementsByClassName("claimBtn"+a)[0].classList.contains("disablebtn")?"0;"+g:g+";"+g}function changeTimezone(){return new Date}
function getWareHouseContent(){if(1>performanceMode||!depositCoord.updated)return!1;10<=userInfo.wood?document.getElementsByClassName("woodquantwrh")[0].src="/styles/img/woodquant2.png":document.getElementsByClassName("woodquantwrh")[0].src="/styles/img/woodquant.png";80<=userInfo.wood&&(document.getElementsByClassName("woodquantwrh")[0].src="/styles/img/woodquant3.png");250<=userInfo.wood&&(document.getElementsByClassName("woodquantwrh")[0].src="/styles/img/woodquant4.png");30<=userInfo.gold?document.getElementsByClassName("coinsquantwrh")[0].src=
"/styles/img/coinsquant2.png":document.getElementsByClassName("coinsquantwrh")[0].src="/styles/img/coinsquant.png";145<=userInfo.gold&&(document.getElementsByClassName("coinsquantwrh")[0].src="/styles/img/coinsquant3.png");10<=userInfo.food?document.getElementsByClassName("foodquantwrh")[0].src="/styles/img/foodquant2.png":(document.getElementsByClassName("foodquantwrh")[0].src="/styles/img/foodquant.png",document.getElementsByClassName("basketquantwrh")[0].src="/styles/img/basketquant.png");100<=
userInfo.food&&(document.getElementsByClassName("foodquantwrh")[0].src="/styles/img/foodquant2.png",document.getElementsByClassName("basketquantwrh")[0].src="/styles/img/basketquant2.png");150<=userInfo.food&&(document.getElementsByClassName("foodquantwrh")[0].src="/styles/img/foodquant3.png");250<=userInfo.food&&(document.getElementsByClassName("basketquantwrh")[0].src="/styles/img/basketquant3.png")}
function isCollide(b,a){return!(b.y+b.height<a.y||b.y>a.y+a.height||b.x+b.width<a.x||b.x>a.x+a.width)}
function checkPosDropped(b,a,c,d,f,e,g){var h={},k={};a?h={objid:parseInt(b.id),width:c-20,height:d-30,x:parseInt(f)+8,y:parseInt(e)+25}:(a=b.getBoundingClientRect(),c=document.getElementById("gamemap"),d=document.getElementById("gamewrapper"),e=f=0,""!=d.style.transform?(f=a.x/ratio-(parseFloat(c.style.transform.split(",")[0].split("(")[1])+parseFloat(parseFloat(d.style.transform.split(",")[0].split("(")[1])/ratio)),e=a.y/ratio-(parseFloat(c.style.transform.split(",")[1])+parseFloat(d.style.transform.split(",")[1])/
ratio)):(f=a.x/ratio-parseFloat(c.style.transform.split(",")[0].split("(")[1]),e=a.y/ratio-parseFloat(c.style.transform.split(",")[1])),isNaN(e)&&(e=0),e+=tileSize,h={objid:parseInt(b.dataset.objid.split(";")[0]),width:parseInt(a.width)+tileSize,height:parseInt(a.height),x:parseInt(f),y:parseInt(e)-30});a=!0;c=objectsArray.sort(function(A,p){return A.objid-p.objid});var l=!1;101==h.objid&&(l=!0);var n=!1;c=$jscomp.makeIterator(c);for(d=c.next();!d.done;d=c.next())if(d=d.value,d.collide){f=!1;if(l&&
15<=d.objid&&17>=d.objid){if(n)continue;f=!0}k=void 0==buildings[d.objid]?15<=d.objid&&17>=d.objid?{width:d.width-30,height:d.height+20,x:d.posx+15,y:d.posy-50}:{width:d.width-10,height:d.height,x:d.posx+5,y:d.posy-35}:{width:d.width-10,height:d.height-30,x:d.posx,y:d.posy+25};if(isCollide(h,k))if(l&&f)n=!0;else{a=!1;break}else l&&!n?a=!1:l&&n&&(a=!0)}return a?!0:(26!=parseInt(b.id)&&setTimeout(function(){makeNotif(2,"Invalid position");var A=Math.floor(99999*Math.random()),p=document.getElementById("gamemap");
p.insertAdjacentHTML("beforeend","<div id='conid"+A+"' style='top:"+h.y+"px;width:"+h.width+"px;height:"+h.height+"px;left:"+h.x+"px' class='testpoint'></div>");(!l&&!n||l&&n)&&p.insertAdjacentHTML("beforeend","<div id='2conid"+A+"' style='top:"+k.y+"px;width:"+k.width+"px;height:"+k.height+"px;left:"+k.x+"px' class='testpoint'></div>");setTimeout(function(){document.getElementById("conid"+A).remove();(!l&&!n||l&&n)&&document.getElementById("2conid"+A).remove()},1E3)},0),!1)}
function roundToEven(b,a){return Math.ceil(b/a)*a}
function reloadNetwork(){(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.yield(ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:officialNetwork}]}),0)})})();document.getElementsByClassName("alertmsgmid")[0].innerHTML='Wrong network, please switch to BNB Chain from your MetaMask. If you do not have it added, you can add it from the following button<div class="buttonlists"><div class="smallbtn reloadbtn"><div class="innersmall">Add</div></div>';show(document.getElementsByClassName("draghead4")[0]);
loadingScreen(!1);document.getElementsByClassName("reloadbtn")[0].addEventListener("click",function(){(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.yield(ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:officialNetwork,chainName:"Binance Smart Chain",nativeCurrency:{name:"Binance Coin",symbol:"BNB",decimals:18},rpcUrls:[rpcURLW],blockExplorerUrls:[blockeExplorerUrl]}]})["catch"](function(a){console.log(a)}),0)})})()})}
function noMetaMask(){var b="",a=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),c=window.navigator.userAgent.toLowerCase().includes("mobi");if(a||c)b='<div id="reader"></div>Or you can scan a QR Code from your computer (read wiki)</br><div class="buttonlists"><div class="smallbtn scanqrcode"><div class="innersmall">Scan QR</div></div></br>';loadingScreen(!1);document.getElementsByClassName("alertmsgmid")[0].innerHTML='It is necessary to have MetaMask installed in order to play. You can install it by clicking on the following button</br><div class="buttonlists"><div class="smallbtn reloadbtn"><div class="innersmall">Install</div></div></div>'+
b;show(document.getElementsByClassName("draghead4")[0]);document.getElementsByClassName("scanqrcode")[0].addEventListener("click",function(){(new Html5QrcodeScanner("reader",{fps:10,qrbox:250,aspectRatio:1})).render(function(d,f){var e=JSON.parse(d);void 0!=e.result&&e.result&&(localStorage.setItem("mobilevers",!0),localStorage.setItem("nftselected",e.nftselected),localStorage.setItem("useraccount",e.wallet),localStorage.setItem("userkey",e.key),localStorage.setItem("mobilecode",e.mobile),window.location.reload())})});
document.getElementsByClassName("reloadbtn")[0].addEventListener("click",function(){window.open("https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn","_blank")})}
function loadingScreen(b){if(b){b=document.createElement("div");b.classList.add("screen-lock");var a=document.createElement("div");a.classList.add("screen-lock-text");a.innerText="Loading...";document.body.appendChild(b);document.body.appendChild(a);window.lockedscreen=!0}else window.lockedscreen=!1,document.getElementsByClassName("screen-lock")[0].remove(),document.getElementsByClassName("screen-lock-text")[0].remove()}
function postData(b,a,c){c=void 0===c?{}:c;var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return reconnectChat?f.yield(fetch(b,{method:a,mode:"cors",credentials:"same-origin",headers:{Authorization:userInfo.gamekey,"Content-Type":"application/json"},body:JSON.stringify(c)}).then(function(e){if(200==e.status)return e})["catch"](function(e){makeNotif(1,"API Error, please wait for the connection to be restored");document.getElementsByClassName("alertmsgmid")[0].innerHTML=
"There are some problems with our API, please check the status of the servers on our social networks</br>";show(document.getElementsByClassName("draghead4")[0]);loadingScreen(!1)}),2):f["return"](!1);d=f.yieldResult;return void 0==d?f["return"]({result:null,msg:"Unknown error"}):f["return"](d.json())})}function distance(b,a,c,d){b=c-b;a=d-a;return Math.sqrt(a*a+b*b)}
function register_tab_GUID(){if("undefined"!==typeof Storage){null==sessionStorage.tabGUID&&(sessionStorage.tabGUID=tab_GUID());var b=sessionStorage.tabGUID;window.addEventListener("storage",storage_Handler,!1);return localStorage.tabGUID=b}return null}function storage_Handler(b){"tabGUID"==b.key&&b.oldValue!=b.newValue&&tab_Warning()}function tab_GUID(){function b(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()}
function tab_Warning(){window.location.href="https://meditown.io"}function multNumbers(b,a){var c=parseFloat(parseFloat(b)*parseFloat(a)).toFixed(6);c.toString().includes(".")||(c+=".00");var d=c.toString().split(".")[0];c=c.toString().split(".")[1];c=c.slice(0,2);return c=parseFloat(d+"."+c)}
function sumNumbers(b,a){var c=parseFloat(parseFloat(b)+parseFloat(a)).toFixed(6);c.toString().includes(".")||(c+=".00");var d=c.toString().split(".")[0];c=c.toString().split(".")[1];c=c.slice(0,2);return c=parseFloat(d+"."+c)}function restNumbers(b,a){var c=parseFloat(parseFloat(b)-parseFloat(a)).toFixed(6);c.toString().includes(".")||(c+=".00");var d=c.toString().split(".")[0];c=c.toString().split(".")[1];c=c.slice(0,2);return c=parseFloat(d+"."+c)}function isOdd(b){return b%2}
function isVisible(b){return!!(b.offsetWidth||b.offsetHeight||b.getClientRects().length)}function show(b){dragDivsWindow.forEach(function(a){b.classList.contains(a)&&(zindexWindow+=1,b.style.zIndex=zindexWindow)});b.style.display="block"}function hide(b){b.style.display="none"}
function makeNotif(b,a){var c=Math.floor(99999*Math.random()),d="";switch(b){case 0:d="success";break;case 1:d="error";break;case 2:d="infos"}d='<div id="c'+c+'" class="notifMaestra game-bordersr '+d+'"> <div class="zoneTXT_notifMaestra"><div class="msg_notifMaestra">'+a+'</div> </div> <div class="clearBoth"></div> </div>';document.getElementsByClassName("notifzone")[0].insertAdjacentHTML("beforeend",d);setTimeout(function(){1<=performanceMode?TweenLite.to("#c"+c,.5,{right:315}):document.getElementById("c"+
c).style.right="315px";setTimeout(function(){1<=performanceMode?TweenLite.to("#c"+c,{onComplete:function(){document.getElementById("c"+c).remove()},duration:.5,right:0}):document.getElementById("c"+c).remove()},2500)},0)}function copy(b){makeNotif(0,"Copied to clipboard");var a=document.createElement("input");document.body.appendChild(a);a.value=b.textContent;a.select();document.execCommand("copy",!1);a.remove()}function randomArray(b){return b[Math.floor(Math.random()*b.length)]};